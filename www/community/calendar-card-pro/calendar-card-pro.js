const e="1.2.3",t={DAYS_TO_SHOW:3,LANGUAGE:"",SHOW_PAST_EVENTS:!1,MAX_EVENTS_TO_SHOW:void 0},n=30,i=5,r=4,a=36e5,o="cache_data_",s=0,l="ğŸ“… Calendar Card Pro",d=300,c=10,h=50,u=10,p={DEFAULT_TAP_ACTION:{action:"none"},DEFAULT_HOLD_ACTION:{action:"none"}},m=500,g=500,f=200,v=300,y=300,_=3e5,w={HOVER:.04,PRESSED:.12},b=.2,T={TOUCH_SIZE:100,POINTER_SIZE:50},$=!0,k=!0,S=!0,D=!0,E=!0,x="",C="var(--ha-card-background)",O="5px",M="0px",z="2px",P="#03a9f4",N="0px",A="var(--secondary-text-color)",L="20px",I="14px",W="26px",F="12px",j="14px",U="12px",R="12px",V="14px",H="var(--primary-text-color)",J="var(--primary-text-color)",B="var(--primary-text-color)",G="var(--primary-text-color)",K="var(--primary-text-color)",q="var(--primary-text-color)",Y="var(--secondary-text-color)",Z="var(--secondary-text-color)";let Q=!1;var X;!function(e){e[e.ERROR=0]="ERROR",e[e.WARN=1]="WARN",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG"}(X||(X={}));let ee=s;const te={title:["background: #424242","color: white","display: inline-block","line-height: 20px","text-align: center","border-radius: 20px 0 0 20px","font-size: 12px","font-weight: bold","padding: 4px 8px 4px 12px","margin: 5px 0"].join(";"),version:["background: #4fc3f7","color: white","display: inline-block","line-height: 20px","text-align: center","border-radius: 0 20px 20px 0","font-size: 12px","font-weight: bold","padding: 4px 12px 4px 8px","margin: 5px 0"].join(";"),prefix:["color: #4fc3f7","font-weight: bold"].join(";"),error:["color: #f44336","font-weight: bold"].join(";"),warn:["color: #ff9800","font-weight: bold"].join(";")};function ne(e){!function(e){if(Q)return;console.groupCollapsed(`%c${l}%cv${e} `,te.title,te.version),console.log("%c Description: %c A calendar card that supports multiple calendars with individual styling. ","font-weight: bold","font-weight: normal"),console.log("%c GitHub: %c https://github.com/alexpfau/calendar-card-pro ","font-weight: bold","font-weight: normal"),console.groupEnd(),Q=!0}(e)}function ie(e,t,...n){if(ee<X.ERROR)return;const i=function(e){if(null==e)return;if("string"==typeof e)return e;if("object"==typeof e)try{return Object.assign({},e)}catch(t){try{return{value:JSON.stringify(e)}}catch(t){return{value:String(e)}}}return String(e)}(t);if(e instanceof Error){const t=e.message||"Unknown error",r="string"==typeof i?` during ${i}`:"",[a,o]=le(`Error${r}: ${t}`,te.error);console.error(a,o),e.stack&&console.error(e.stack),i&&"object"==typeof i&&console.error("Context:",Object.assign(Object.assign({},i),{timestamp:(new Date).toISOString()})),n.length>0&&console.error("Additional data:",...n)}else if("string"==typeof e){const t="string"==typeof i?` during ${i}`:"",[r,a]=le(`${e}${t}`,te.error);i&&"object"==typeof i?console.error(r,a,Object.assign({context:Object.assign(Object.assign({},i),{timestamp:(new Date).toISOString()})},n.length>0?{additionalData:n}:{})):n.length>0?console.error(r,a,...n):console.error(r,a)}else{const t="string"==typeof i?` during ${i}`:"",[r,a]=le(`Unknown error${t}:`,te.error);console.error(r,a,e),i&&"object"==typeof i&&console.error("Context:",Object.assign(Object.assign({},i),{timestamp:(new Date).toISOString()})),n.length>0&&console.error("Additional data:",...n)}}function re(e,...t){se(X.WARN,e,te.warn,console.warn,...t)}function ae(e,...t){se(X.INFO,e,te.prefix,console.log,...t)}function oe(e,...t){se(X.DEBUG,e,te.prefix,console.log,...t)}function se(e,t,n,i,...r){if(ee<e)return;const[a,o]=le(t,n);r.length>0?i(a,o,...r):i(a,o)}function le(e,t){return[`%c[${l}] ${e}`,t]}const de={entities:[],days_to_show:t.DAYS_TO_SHOW,max_events_to_show:t.MAX_EVENTS_TO_SHOW,show_past_events:t.SHOW_PAST_EVENTS,language:t.LANGUAGE,time_24h:$,show_end_time:k,show_month:S,show_location:D,remove_location_country:E,title:x,background_color:C,row_spacing:O,additional_card_spacing:M,vertical_line_width:z,vertical_line_color:P,horizontal_line_width:N,horizontal_line_color:A,title_font_size:L,weekday_font_size:I,day_font_size:W,month_font_size:F,event_font_size:j,time_font_size:U,location_font_size:R,time_location_icon_size:V,title_color:J,weekday_color:B,day_color:G,month_color:K,event_color:q,time_color:Y,location_color:Z,tap_action:p.DEFAULT_TAP_ACTION,hold_action:p.DEFAULT_HOLD_ACTION,refresh_interval:n};function ce(e){return Object.keys(e).find((e=>e.startsWith("calendar.")))||null}var he={daysOfWeek:["Ne","Po","Ãšt","St","ÄŒt","PÃ¡","So"],fullDaysOfWeek:["NedÄ›le","PondÄ›lÃ­","ÃšterÃ½","StÅ™eda","ÄŒtvrtek","PÃ¡tek","Sobota"],months:["Led","Ãšno","BÅ™e","Dub","KvÄ›","ÄŒvn","ÄŒvc","Srp","ZÃ¡Å™","Å˜Ã­j","Lis","Pro"],allDay:"celÃ½ den",multiDay:"do",at:"v",endsToday:"konÄÃ­ dnes",endsTomorrow:"konÄÃ­ zÃ­tra",noEvents:"Å½Ã¡dnÃ© nadchÃ¡zejÃ­cÃ­ udÃ¡losti",loading:"NaÄÃ­tÃ¡nÃ­ udÃ¡lostÃ­ z kalendÃ¡Å™e...",error:"Chyba: Entita kalendÃ¡Å™e nebyla nalezena nebo je nesprÃ¡vnÄ› nakonfigurovÃ¡na"},ue={daysOfWeek:["SÃ¸n","Man","Tir","Ons","Tor","Fre","LÃ¸r"],fullDaysOfWeek:["SÃ¸ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","LÃ¸rdag"],months:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],allDay:"hele dagen",multiDay:"indtil",at:"kl.",endsToday:"slutter i dag",endsTomorrow:"slutter i morgen",noEvents:"Ingen kommende begivenheder",loading:"IndlÃ¦ser kalenderbegivenheder...",error:"Fejl: Kalenderenheden blev ikke fundet eller er ikke konfigureret korrekt"},pe={daysOfWeek:["So","Mo","Di","Mi","Do","Fr","Sa"],fullDaysOfWeek:["Sonntag","Montag","Dienstag","Mittwoch","Donnerstag","Freitag","Samstag"],months:["Jan","Feb","MÃ¤r","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Dez"],allDay:"ganztÃ¤gig",multiDay:"bis",at:"um",endsToday:"endet heute",endsTomorrow:"endet morgen",noEvents:"Keine anstehenden Termine",loading:"KalendereintrÃ¤ge werden geladen...",error:"Fehler: Kalender-Entity nicht gefunden oder falsch konfiguriert"},me={daysOfWeek:["ÎšÏ…Ï","Î”ÎµÏ…","Î¤ÏÎ¹","Î¤ÎµÏ„","Î ÎµÎ¼","Î Î±Ï","Î£Î±Î²"],fullDaysOfWeek:["ÎšÏ…ÏÎ¹Î±ÎºÎ®","Î”ÎµÏ…Ï„Î­ÏÎ±","Î¤ÏÎ¯Ï„Î·","Î¤ÎµÏ„Î¬ÏÏ„Î·","Î Î­Î¼Ï€Ï„Î·","Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®","Î£Î¬Î²Î²Î±Ï„Î¿"],months:["Î™Î±Î½","Î¦ÎµÎ²","ÎœÎ±Ï","Î‘Ï€Ï","ÎœÎ±ÏŠ","Î™Î¿Ï…Î½","Î™Î¿Ï…Î»","Î‘Ï…Î³","Î£ÎµÏ€","ÎŸÎºÏ„","ÎÎ¿Îµ","Î”ÎµÎº"],allDay:"ÎŸÎ»Î¿Î®Î¼ÎµÏÎ¿",multiDay:"Î­Ï‰Ï‚",at:"ÏƒÏ„Î¹Ï‚",endsToday:"Î»Î®Î³ÎµÎ¹ ÏƒÎ®Î¼ÎµÏÎ±",endsTomorrow:"Î»Î®Î³ÎµÎ¹ Î±ÏÏÎ¹Î¿",noEvents:"Î”ÎµÎ½ Ï…Ï€Î¬ÏÏ‡Î¿Ï…Î½ Ï€ÏÎ¿Î³ÏÎ±Î¼Î¼Î±Ï„Î¹ÏƒÎ¼Î­Î½Î± Î³ÎµÎ³Î¿Î½ÏŒÏ„Î±",loading:"Î¦ÏŒÏÏ„Ï‰ÏƒÎ· Î·Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï…...",error:"Î£Ï†Î¬Î»Î¼Î±: Î— Î¿Î½Ï„ÏŒÏ„Î·Ï„Î± Î·Î¼ÎµÏÎ¿Î»Î¿Î³Î¯Î¿Ï… Î´ÎµÎ½ Î²ÏÎ­Î¸Î·ÎºÎµ Î® Î´ÎµÎ½ Î­Ï‡ÎµÎ¹ ÏÏ…Î¸Î¼Î¹ÏƒÏ„ÎµÎ¯ ÏƒÏ‰ÏƒÏ„Î¬"},ge={daysOfWeek:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],fullDaysOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],months:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],allDay:"all-day",multiDay:"until",at:"at",endsToday:"ends today",endsTomorrow:"ends tomorrow",noEvents:"No upcoming events",loading:"Loading calendar events...",error:"Error: Calendar entity not found or improperly configured"},fe={daysOfWeek:["Dom","Lun","Mar","MiÃ©","Jue","Vie","SÃ¡b"],fullDaysOfWeek:["Domingo","Lunes","Martes","MiÃ©rcoles","Jueves","Viernes","SÃ¡bado"],months:["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],allDay:"todo el dÃ­a",multiDay:"hasta",at:"a las",endsToday:"termina hoy",endsTomorrow:"termina maÃ±ana",noEvents:"No hay eventos prÃ³ximos",loading:"Cargando eventos del calendario...",error:"Error: La entidad del calendario no se encontrÃ³ o estÃ¡ mal configurada"},ve={daysOfWeek:["Su","Ma","Ti","Ke","To","Pe","La"],fullDaysOfWeek:["Sunnuntai","Maanantai","Tiistai","Keskiviikko","Torstai","Perjantai","Lauantai"],months:["Tammi","Helmi","Maalis","Huhti","Touko","KesÃ¤","HeinÃ¤","Elo","Syys","Loka","Marras","Joulu"],allDay:"koko pÃ¤ivÃ¤",multiDay:"asti",at:"klo",endsToday:"pÃ¤Ã¤ttyy tÃ¤nÃ¤Ã¤n",endsTomorrow:"pÃ¤Ã¤ttyy huomenna",noEvents:"Ei tulevia tapahtumia",loading:"Ladataan kalenteritapahtumia...",error:"Virhe: KalenteriyksikkÃ¶Ã¤ ei lÃ¶ydy tai se on vÃ¤Ã¤rin mÃ¤Ã¤ritetty"};const ye={cs:he,da:ue,de:pe,el:me,en:ge,es:fe,fi:ve,fr:{daysOfWeek:["Dim","Lun","Mar","Mer","Jeu","Ven","Sam"],fullDaysOfWeek:["Dimanche","Lundi","Mardi","Mercredi","Jeudi","Vendredi","Samedi"],months:["Jan","FÃ©v","Mar","Avr","Mai","Juin","Juil","AoÃ»t","Sep","Oct","Nov","DÃ©c"],allDay:"toute la journÃ©e",multiDay:"jusqu'au",at:"Ã ",endsToday:"finit aujourd'hui",endsTomorrow:"finit demain",noEvents:"Aucun Ã©vÃ©nement Ã  venir",loading:"Chargement des Ã©vÃ©nements...",error:"Erreur: EntitÃ© de calendrier introuvable ou mal configurÃ©e"},he:{daysOfWeek:["×'","×‘'","×’'","×“'","×”'","×•'","×©'"],fullDaysOfWeek:["×¨××©×•×Ÿ","×©× ×™","×©×œ×™×©×™","×¨×‘×™×¢×™","×—××™×©×™","×©×™×©×™","×©×‘×ª"],months:["×™× ×•","×¤×‘×¨","××¨×¥","××¤×¨","×××™","×™×•× ","×™×•×œ","××•×’","×¡×¤×˜","××•×§","× ×•×‘","×“×¦×"],allDay:"×›×œ-×”×™×•×",multiDay:"×¢×“",endsToday:"××¡×ª×™×™× ×”×™×•×",endsTomorrow:"××¡×ª×™×™× ××—×¨",at:"×‘×©×¢×”",noEvents:"××™×Ÿ ××™×¨×•×¢×™× ×§×¨×•×‘×™×",loading:"×˜×•×¢×Ÿ ××™×¨×•×¢×™ ×œ×•×— ×©× ×”...",error:"×©×’×™××”: ×™×©×•×ª ×œ×•×— ×”×©× ×” ×œ× × ××¦××” ××• ×œ× ××•×’×“×¨×ª ×›×¨××•×™"},hu:{daysOfWeek:["Vas","HÃ©t","Kedd","Sze","CsÃ¼t","PÃ©n","Szo"],fullDaysOfWeek:["VasÃ¡rnap","HÃ©tfÅ‘","Kedd","Szerda","CsÃ¼tÃ¶rtÃ¶k","PÃ©ntek","Szombat"],months:["Jan","Feb","MÃ¡r","Ãpr","MÃ¡j","JÃºn","JÃºl","Aug","Szep","Okt","Nov","Dec"],allDay:"egÃ©sz napos",multiDay:"eddig:",endsToday:"ma este Ã©r vÃ©get",endsTomorrow:"holnap Ã©r vÃ©get",at:"itt:",noEvents:"MÃ¡ra nincs tÃ¶bb esemÃ©ny",loading:"NaptÃ¡rbejegyzÃ©sek betÃ¶ltÃ©se...",error:"Hiba: NaptÃ¡r entitÃ¡s nem talÃ¡lhatÃ³ vagy nem megfelelÅ‘en konfigutÃ¡lt"},is:{daysOfWeek:["Sun","MÃ¡n","Ãri","MiÃ°","Fim","FÃ¶s","Lau"],fullDaysOfWeek:["Sunnudagur","MÃ¡nudagur","ÃriÃ°judagur","MiÃ°vikudagur","Fimmtudagur","FÃ¶studagur","Laugardagur"],months:["Jan","Feb","Mar","Apr","MaÃ­","JÃºn","JÃºl","ÃgÃº","Sep","Okt","NÃ³v","Des"],allDay:"Allur dagurinn",multiDay:"Ã¾ar til",at:"kl",endsToday:"lÃ½kur Ã­ dag",endsTomorrow:"lÃ½kur Ã¡ morgun",noEvents:"Engir viÃ°burÃ°ir Ã¡ nÃ¦stunni",loading:"HleÃ°ur inn dagatal...",error:"Villa: Dagatalseining finnst ekki eÃ°a er vanstillt"},it:{daysOfWeek:["Dom","Lun","Mar","Mer","Gio","Ven","Sab"],fullDaysOfWeek:["Domenica","LunedÃ¬","MartedÃ¬","MercoledÃ¬","GiovedÃ¬","VenerdÃ¬","Sabato"],months:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],allDay:"tutto-il-giorno",multiDay:"fino a",at:"a",endsToday:"termina oggi",endsTomorrow:"termina domani",noEvents:"Nessun evento programmato",loading:"Sto caricando il calendario degli eventi...",error:"Errore: EntitÃ  Calendario non trovata o non configurata correttamente"},nb:{daysOfWeek:["SÃ¸n","Man","Tir","Ons","Tor","Fre","LÃ¸r"],fullDaysOfWeek:["SÃ¸ndag","Mandag","Tirsdag","Onsdag","Torsdag","Fredag","LÃ¸rdag"],months:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],allDay:"hele dagen",multiDay:"inntil",at:"kl. ",endsToday:"slutter i dag",endsTomorrow:"slutter i morgen",noEvents:"Ingen kommende hendelser",loading:"Laster kalenderhendelser...",error:"Feil: Kalenderenheten ble ikke funnet eller er ikke konfigurert riktig"},nl:{daysOfWeek:["Zo","Ma","Di","Wo","Do","Vr","Za"],fullDaysOfWeek:["Zondag","Maandag","Dinsdag","Woensdag","Donderdag","Vrijdag","Zaterdag"],months:["Jan","Feb","Mrt","Apr","Mei","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],allDay:"hele dag",multiDay:"tot",at:"om",endsToday:"eindigt vandaag",endsTomorrow:"eindigt morgen",noEvents:"Geen afspraken gepland",loading:"Kalender afspraken laden...",error:"Fout: Kalender niet gevonden of verkeerd geconfigureerd"},nn:{daysOfWeek:["SÃ¸n","MÃ¥n","Tys","Ons","Tor","Fre","Lau"],fullDaysOfWeek:["SÃ¸ndag","MÃ¥ndag","Tysdag","Onsdag","Torsdag","Fredag","Laurdag"],months:["Jan","Feb","Mar","Apr","Mai","Jun","Jul","Aug","Sep","Okt","Nov","Des"],allDay:"heile dagen",multiDay:"inntil",at:"kl. ",endsToday:"sluttar i dag",endsTomorrow:"sluttar i morgon",noEvents:"Ingen kommande hendingar",loading:"Lastar kalenderhendingar...",error:"Feil: Kalendereininga vart ikkje funnen eller er ikkje konfigurert riktig"},pl:{daysOfWeek:["Nd","Pn","Wt","Åšr","Cz","Pt","Sb"],fullDaysOfWeek:["niedzieli","poniedziaÅ‚ku","wtorku","Å›rody","czwartku","piÄ…tku","soboty"],months:["sty","lut","mar","kwi","maj","cze","lip","sie","wrz","paÅº","lis","gru"],allDay:"caÅ‚y dzieÅ„",multiDay:"do",at:"o",endsToday:"koÅ„czy siÄ™ dziÅ›",endsTomorrow:"koÅ„czy siÄ™ jutro",noEvents:"Brak nadchodzÄ…cych wydarzeÅ„",loading:"Åadowanie wydarzeÅ„ z kalendarza...",error:"BÅ‚Ä…d: encja kalendarza nie zostaÅ‚a znaleziona lub jest niepoprawnie skonfigurowana"},pt:{daysOfWeek:["Dom","Seg","Ter","Qua","Qui","Sex","SÃ¡b"],fullDaysOfWeek:["Domingo","Segunda-feira","TerÃ§a-feira","Quarta-feira","Quinta-feira","Sexta-feira","SÃ¡bado"],months:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],allDay:"o dia todo",multiDay:"atÃ©",at:"Ã s",endsToday:"termina hoje",endsTomorrow:"termina amanhÃ£",noEvents:"Nenhum evento prÃ³ximo",loading:"Carregando eventos do calendÃ¡rio...",error:"Erro: A entidade do calendÃ¡rio nÃ£o foi encontrada ou estÃ¡ configurada incorretamente"},ru:{daysOfWeek:["Ğ’Ñ","ĞŸĞ½","Ğ’Ñ‚","Ğ¡Ñ€","Ğ§Ñ‚","ĞŸÑ‚","Ğ¡Ğ±"],fullDaysOfWeek:["Ğ²Ğ¾ÑĞºÑ€ĞµÑĞµĞ½ÑŒÑ","Ğ¿Ğ¾Ğ½ĞµĞ´ĞµĞ»ÑŒĞ½Ğ¸ĞºĞ°","Ğ²Ñ‚Ğ¾Ñ€Ğ½Ğ¸ĞºĞ°","ÑÑ€ĞµĞ´Ñ‹","Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ³Ğ°","Ğ¿ÑÑ‚Ğ½Ğ¸Ñ†Ñ‹","ÑÑƒĞ±Ğ±Ğ¾Ñ‚Ñ‹"],months:["ÑĞ½Ğ²","Ñ„ĞµĞ²","Ğ¼Ğ°Ñ€","Ğ°Ğ¿Ñ€","Ğ¼Ğ°Ğ¹","Ğ¸ÑĞ½","Ğ¸ÑĞ»","Ğ°Ğ²Ğ³","ÑĞµĞ½","Ğ¾ĞºÑ‚","Ğ½Ğ¾Ñ","Ğ´ĞµĞº"],allDay:"Ğ²ĞµÑÑŒ Ğ´ĞµĞ½ÑŒ",multiDay:"Ğ´Ğ¾",at:"Ğ²",endsToday:"Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ",endsTomorrow:"Ğ·Ğ°ĞºĞ°Ğ½Ñ‡Ğ¸Ğ²Ğ°ĞµÑ‚ÑÑ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°",noEvents:"ĞĞµÑ‚ Ğ¿Ñ€ĞµĞ´ÑÑ‚Ğ¾ÑÑ‰Ğ¸Ñ… ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹",loading:"Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ...",error:"ĞÑˆĞ¸Ğ±ĞºĞ°: ĞĞ±ÑŠĞµĞºÑ‚ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€ÑŒ, Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½"},sl:{daysOfWeek:["ned","pon","tor","sre","Äet","pet","sob"],fullDaysOfWeek:["nedelja","ponedeljek","torek","sreda","Äetrtek","petek","sobota"],months:["jan","feb","mar","apr","maj","jun","jul","avg","sep","okt","nov","dec"],allDay:"cel dan",multiDay:"do",at:"ob",endsToday:"konÄa se danes",endsTomorrow:"konÄa se jutri",noEvents:"Ni planiranih dogodkov",loading:"Nalagam dogodke...",error:"Napaka: Entiteta ni bila najdena ali pa je nepravilno konfigurirana."},sv:{daysOfWeek:["SÃ¶n","MÃ¥n","Tis","Ons","Tor","Fre","LÃ¶r"],fullDaysOfWeek:["SÃ¶ndag","MÃ¥ndag","Tisdag","Onsdag","Torsdag","Fredag","LÃ¶rdag"],months:["Jan","Feb","Mar","Apr","Maj","Jun","Jul","Aug","Sep","Okt","Nov","Dec"],allDay:"heldag",multiDay:"till",at:"vid",endsToday:"slutar idag",endsTomorrow:"slutar imorgon",noEvents:"Inga kommande hÃ¤ndelser",loading:"Laddar kalenderhÃ¤ndelser...",error:"Fel: Kalenderentiteten hittades inte eller Ã¤r felaktigt konfigurerad."},uk:{daysOfWeek:["Ğ’Ñ","ĞŸĞ½","Ğ’Ñ‚","Ğ¡Ñ€","Ğ§Ñ‚","ĞŸÑ‚","Ğ¡Ğ±"],fullDaysOfWeek:["Ğ½ĞµĞ´Ñ–Ğ»Ñ–","Ğ¿Ğ¾Ğ½ĞµĞ´Ñ–Ğ»ĞºĞ°","Ğ²Ñ–Ğ²Ñ‚Ğ¾Ñ€ĞºĞ°","ÑĞµÑ€ĞµĞ´Ğ¸","Ñ‡ĞµÑ‚Ğ²ĞµÑ€Ğ³Ğ°","Ğ¿'ÑÑ‚Ğ½Ğ¸Ñ†Ñ–","ÑÑƒĞ±Ğ¾Ñ‚Ğ¸"],months:["ÑÑ–Ñ‡","Ğ»ÑÑ‚","Ğ±ĞµÑ€","ĞºĞ²Ñ–","Ñ‚Ñ€Ğ°","Ñ‡ĞµÑ€","Ğ»Ğ¸Ğ¿","ÑĞµÑ€","Ğ²ĞµÑ€","Ğ¶Ğ¾Ğ²","Ğ»Ğ¸Ñ","Ğ³Ñ€Ñƒ"],allDay:"Ğ²ĞµÑÑŒ Ğ´ĞµĞ½ÑŒ",multiDay:"Ğ¿Ğ¾ĞºĞ¸",at:"Ğ²",endsToday:"Ğ·Ğ°ĞºÑ–Ğ½Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ ÑÑŒĞ¾Ğ³Ğ¾Ğ´Ğ½Ñ–",endsTomorrow:"Ğ·Ğ°ĞºÑ–Ğ½Ñ‡ÑƒÑ”Ñ‚ÑŒÑÑ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°",noEvents:"ĞĞµĞ¼Ğ°Ñ” Ğ¼Ğ°Ğ¹Ğ±ÑƒÑ‚Ğ½Ñ–Ñ… Ğ¿Ğ¾Ğ´Ñ–Ğ¹",loading:"Ğ—Ğ°Ğ²Ğ°Ğ½Ñ‚Ğ°Ğ¶ĞµĞ½Ğ½Ñ Ğ¿Ğ¾Ğ´Ñ–Ğ¹ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ...",error:"ĞŸĞ¾Ğ¼Ğ¸Ğ»ĞºĞ°: CÑƒÑ‚Ğ½Ñ–ÑÑ‚ÑŒ ĞºĞ°Ğ»ĞµĞ½Ğ´Ğ°Ñ€Ñ Ğ½Ğµ Ğ·Ğ½Ğ°Ğ¹Ğ´ĞµĞ½Ğ¾ Ğ°Ğ±Ğ¾ Ğ½Ğ°Ğ»Ğ°ÑˆÑ‚Ğ¾Ğ²Ğ°Ğ½Ğ¾ Ğ½ĞµĞ¿Ñ€Ğ°Ğ²Ğ¸Ğ»ÑŒĞ½Ğ¾"},vi:{daysOfWeek:["CN","T.2","T.3","T.4","T.5","T.6","T.7"],fullDaysOfWeek:["Chá»§ Nháº­t","Thá»© Hai","Thá»© Ba","Thá»© TÆ°","Thá»© NÄƒm","Thá»© SÃ¡u","Thá»© Báº£y"],months:["Th1","Th2","Th3","Th4","Th5","Th6","Th7","Th8","Th9","Th10","Th11","Th12"],allDay:"cáº£ ngÃ y",multiDay:"Ä‘áº¿n",at:"lÃºc",endsToday:"káº¿t thÃºc hÃ´m nay",endsTomorrow:"káº¿t thÃºc ngÃ y mai",noEvents:"KhÃ´ng cÃ³ sá»± kiá»‡n sáº¯p tá»›i",loading:"Äang táº£i sá»± kiá»‡n...",error:"Lá»—i: KhÃ´ng tÃ¬m tháº¥y lá»‹ch hoáº·c cáº¥u hÃ¬nh khÃ´ng Ä‘Ãºng"},"zh-cn":{daysOfWeek:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],fullDaysOfWeek:["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"],months:["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"],allDay:"æ•´å¤©",multiDay:"ç›´åˆ°",at:"åœ¨",endsToday:"ä»Šå¤©ç»“æŸ",endsTomorrow:"æ˜å¤©ç»“æŸ",noEvents:"æ²¡æœ‰å³å°†åˆ°æ¥çš„æ´»åŠ¨",loading:"æ­£åœ¨åŠ è½½æ—¥å†äº‹ä»¶...",error:"é”™è¯¯ï¼šæ‰¾ä¸åˆ°æ—¥å†å®ä½“æˆ–é…ç½®ä¸æ­£ç¡®"},"zh-tw":{daysOfWeek:["æ—¥","ä¸€","äºŒ","ä¸‰","å››","äº”","å…­"],fullDaysOfWeek:["æ˜ŸæœŸæ—¥","æ˜ŸæœŸä¸€","æ˜ŸæœŸäºŒ","æ˜ŸæœŸä¸‰","æ˜ŸæœŸå››","æ˜ŸæœŸäº”","æ˜ŸæœŸå…­"],months:["ä¸€æœˆ","äºŒæœˆ","ä¸‰æœˆ","å››æœˆ","äº”æœˆ","å…­æœˆ","ä¸ƒæœˆ","å…«æœˆ","ä¹æœˆ","åæœˆ","åä¸€æœˆ","åäºŒæœˆ"],allDay:"æ•´å¤©",multiDay:"ç›´åˆ°",at:"åœ¨",endsToday:"ä»Šå¤©çµæŸ",endsTomorrow:"æ˜å¤©çµæŸ",noEvents:"æ²’æœ‰å³å°‡åˆ°ä¾†çš„æ´»å‹•",loading:"æ­£åœ¨åŠ è¼‰æ—¥æ›†äº‹ä»¶...",error:"éŒ¯èª¤ï¼šæ‰¾ä¸åˆ°æ—¥æ›†å¯¦é«”æˆ–é…ç½®ä¸æ­£ç¢º"}},_e="en";function we(e,t){if(oe(`Language detection - Config language: ${e||"not set"}`),oe(`Language detection - HA system language: ${(null==t?void 0:t.language)||"not available"}`),e&&""!==e.trim()){const t=e.toLowerCase();if(ye[t])return oe(`Using config language: ${t}`),t;oe(`Config language ${t} not supported, trying HA system language`)}if(null==t?void 0:t.language){const e=t.language.toLowerCase();if(ye[e])return oe(`Using HA system language: ${e}`),e;const n=e.split(/[-_]/)[0];if(n!==e&&ye[n])return oe(`Using base language part from HA system language: ${n}`),n;oe(`No supported translation for HA language ${e}`)}return oe(`Using default language: ${_e}`),_e}function be(e){const t=(null==e?void 0:e.toLowerCase())||_e;return ye[t]||ye[_e]}function Te(e,t,n){return function(e,t,n){const i=be(e);return t in i?i[t]:void 0!==n?n:t}(e,t,n)}function $e(e){const t=(null==e?void 0:e.toLowerCase())||"";return"de"===t?"day-dot-month":"en"===t||"hu"===t?"month-day":"day-month"}function ke(e,t,n=!1){const i=be(e),r=n?"fullDaysOfWeek":"daysOfWeek";return(t<0||t>6)&&(re(`Invalid day index ${t}. Using default.`),t=0),i[r][t]}function Se(e,t){const n=be(e);return(t<0||t>11)&&(re(`Invalid month index ${t}. Using default.`),t=0),n.months[t]}function De(e,t,n="en"){const i=!e.start.dateTime;let r,a;i?(r=xe(e.start.date||""),a=xe(e.end.date||"")):(r=new Date(e.start.dateTime||""),a=new Date(e.end.dateTime||""));const o=be(n);if(i){const e=new Date(a);return e.setDate(e.getDate()-1),r.toDateString()!==e.toDateString()?function(e,t,n){const i=new Date,r=new Date(i.getFullYear(),i.getMonth(),i.getDate()),a=new Date(r);if(a.setDate(a.getDate()+1),e.toDateString()===r.toDateString())return`${n.allDay}, ${n.endsToday}`;if(e.toDateString()===a.toDateString())return`${n.allDay}, ${n.endsTomorrow}`;const o=e.getDate(),s=n.months[e.getMonth()];switch($e(t)){case"day-dot-month":return`${n.allDay}, ${n.multiDay} ${o}. ${s}`;case"month-day":return`${n.allDay}, ${n.multiDay} ${s} ${o}`;default:return`${n.allDay}, ${n.multiDay} ${o} ${s}`}}(e,n,o):o.allDay}return r.toDateString()!==a.toDateString()?function(e,t,n,i,r){const a=new Date,o=new Date(a.getFullYear(),a.getMonth(),a.getDate()),s=new Date(o);if(s.setDate(s.getDate()+1),t.toDateString()===o.toDateString()){const e=Ce(t,r);return`${i.endsToday} ${i.at} ${e}`}if(t.toDateString()===s.toDateString()){const e=Ce(t,r);return`${i.endsTomorrow} ${i.at} ${e}`}const l=t.getDate(),d=i.months[t.getMonth()],c=i.fullDaysOfWeek[t.getDay()],h=Ce(t,r),u=$e(n);if(o.toDateString()!==e.toDateString()&&o<t)switch(u){case"day-dot-month":return[i.multiDay,c+",",`${l}.`,d,i.at,h].join(" ");case"month-day":return[i.multiDay,c+",",d,l,i.at,h].join(" ");default:return[i.multiDay,c+",",l,d,i.at,h].join(" ")}const p=Ce(e,r);switch(u){case"day-dot-month":return[p,i.multiDay,c+",",`${l}.`,d,i.at,h].join(" ");case"month-day":return[p,i.multiDay,c+",",d,l,i.at,h].join(" ");default:return[p,i.multiDay,c+",",l,d,i.at,h].join(" ")}}(r,a,n,o,t.time_24h):function(e,t,n,i){return n?`${Ce(e,i)} - ${Ce(t,i)}`:Ce(e,i)}(r,a,t.show_end_time,t.time_24h)}function Ee(e,t=!0){if(!e||!t)return e||"";const n=e.trim(),i=new Set(["Germany","Deutschland","United States","USA","United States of America","United Kingdom","Great Britain","France","Italy","Italia","Spain","EspaÃ±a","Netherlands","Nederland","Austria","Ã–sterreich","Switzerland","Schweiz"]),r=n.split(",").map((e=>e.trim()));if(r.length>0&&i.has(r[r.length-1]))return r.pop(),r.join(", ");const a=n.split(/\s+/);return a.length>0&&i.has(a[a.length-1])?(a.pop(),a.join(" ")):n}function xe(e){const[t,n,i]=e.split("-").map(Number);return new Date(t,n-1,i)}function Ce(e,t=!0){let n=e.getHours();const i=e.getMinutes();if(!t){const e=n>=12?"PM":"AM";return n=n%12||12,`${n}:${i.toString().padStart(2,"0")} ${e}`}return`${n}:${i.toString().padStart(2,"0")}`}async function Oe(e){const{hass:n,config:i,instanceId:r,force:a,currentEvents:o,callbacks:s}=e;if(!Me(n,i.entities))return;const l=function(){if(window.performance&&window.performance.navigation)return 1===window.performance.navigation.type;if(window.performance&&window.performance.getEntriesByType){const e=window.performance.getEntriesByType("navigation");if(e.length>0&&"type"in e[0])return"reload"===e[0].type}return!1}();l&&oe("Manual page reload detected - using shorter cache lifetime");const d=Pe(r,i.entities,i.days_to_show,i.show_past_events),c=!a&&function(e,t=!1){return null!==Ne(e,void 0,t)}(d,l);if(c){const e=Ae(d,i,l);if(e)return ae(`Using ${e.length} events from cache`),s.setEvents(e),s.setLoading(!1),void s.renderCallback()}ae(`Fetching events from API${a?" (forced refresh)":""}${l?" (manual page reload)":""}`),s.setLoading(!0),s.renderCallback();try{const e=await async function(e,n,i,r=!1,a=[]){if(!Me(e,n.entities))return{events:a,fromCache:!1,error:null};const o=Pe(i,n.entities,n.days_to_show,n.show_past_events),s=!r&&Ae(o,n);if(s)return{events:s,fromCache:!0,error:null};try{const i=n.entities.map((e=>"string"==typeof e?{entity:e,color:"var(--primary-text-color)"}:e)),r=function(e){const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=new Date(i),a=parseInt(e.toString())||t.DAYS_TO_SHOW;return r.setDate(i.getDate()+a),r.setHours(23,59,59,999),{start:i,end:r}}(n.days_to_show),a=await async function(e,t,n){const i=[];for(const r of t)try{const t=`calendars/${r.entity}?start=${n.start.toISOString()}&end=${n.end.toISOString()}`;ae(`Fetching calendar events with path: ${t}`);const a=await e.callApi("GET",t);if(!a||!Array.isArray(a)){re(`Invalid response for ${r.entity}`);continue}const o=a.map((e=>Object.assign(Object.assign({},e),{_entityId:r.entity})));i.push(...o)}catch(t){ie(`Failed to fetch events for ${r.entity}:`,t);try{ae("Available hass API methods:",Object.keys(e).filter((t=>"function"==typeof e[t])))}catch(e){}}return i}(e,i,r);return ae(`Fetched ${a.length} events from ${i.length} calendars`),function(e,t){try{ae(`Caching ${t.length} events`);const n={events:t,timestamp:Date.now()};return localStorage.setItem(e,JSON.stringify(n)),null!==Ne(e)}catch(e){return ie("Failed to cache calendar events:",e),!1}}(o,[...a]),{events:[...a],fromCache:!1,error:null}}catch(t){if(ie("API error:",t),0===a.length)try{ae("Trying fallback to fetch today events");const i="string"==typeof n.entities[0]?n.entities[0]:n.entities[0].entity,r=await async function(e,t){try{const n=new Date,i=new Date(n.getFullYear(),n.getMonth(),n.getDate()),r=new Date(i);r.setHours(23,59,59,999);return await e.callApi("GET",`calendars/${t}?start=${i.toISOString()}&end=${r.toISOString()}`)}catch(e){return null}}(e,i);return{events:r?[...r]:[],fromCache:!1,error:t}}catch(e){return ie("Fallback failed:",e),{events:[],fromCache:!1,error:e}}return{events:a,fromCache:!1,error:t}}}(n,i,r,a,o);e.events&&(s.setEvents(e.events),s.updateLastUpdate(),s.restartTimer&&s.restartTimer()),e.error&&ie("Error during event update:",e.error)}catch(e){ie("Failed to update events:",e)}finally{s.setLoading(!1),s.renderCallback()}}function Me(e,t){return!(!e||!t.length)}function ze(e,n,i,r){var a;const o={},s=new Date,l=new Date(s.getFullYear(),s.getMonth(),s.getDate()),d=new Date(l);d.setHours(23,59,59,999);const c=e.filter((e=>{if(!(null==e?void 0:e.start)||!(null==e?void 0:e.end))return!1;const t=!e.start.dateTime;let i,r;if(t){if(i=e.start.date?xe(e.start.date):null,r=e.end.date?xe(e.end.date):null,r){const e=new Date(r);e.setDate(e.getDate()-1),r=e}}else i=e.start.dateTime?new Date(e.start.dateTime):null,r=e.end.dateTime?new Date(e.end.dateTime):null;if(!i||!r)return!1;return!!(i>=l&&i<=d||i>d||r>=l)&&!(!n.show_past_events&&!t&&r<s)}));if(0===c.length)return[];c.forEach((e=>{let t,i,a;if(!e.start.dateTime){if(t=e.start.date?xe(e.start.date):null,i=e.end.date?xe(e.end.date):null,i){const e=new Date(i);e.setDate(e.getDate()-1),i=e}}else t=e.start.dateTime?new Date(e.start.dateTime):null,i=e.end.dateTime?new Date(e.end.dateTime):null;if(!t||!i)return;a=t>=l?t:i.toDateString()===l.toDateString()||t<l&&i>l?l:t;const s=`${(d=a).getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`;var d;const c=be(r);o[s]||(o[s]={weekday:c.daysOfWeek[a.getDay()],day:a.getDate(),month:c.months[a.getMonth()],timestamp:a.getTime(),events:[]}),o[s].events.push({summary:e.summary||"",time:De(e,n,r),location:n.show_location?Ee(e.location||"",n.remove_location_country):"",start:e.start,end:e.end,_entityId:e._entityId})})),Object.values(o).forEach((e=>{e.events.sort(((e,t)=>{const n=!e.start.dateTime,i=!t.start.dateTime;if(n&&!i)return-1;if(!n&&i)return 1;let r,a;return r=n&&e.start.date?xe(e.start.date).getTime():e.start.dateTime?new Date(e.start.dateTime).getTime():0,a=i&&t.start.date?xe(t.start.date).getTime():t.start.dateTime?new Date(t.start.dateTime).getTime():0,r-a}))}));let h=Object.values(o).sort(((e,t)=>e.timestamp-t.timestamp)).slice(0,n.days_to_show||t.DAYS_TO_SHOW);if(n.max_events_to_show&&!i){let e=0;const t=null!==(a=n.max_events_to_show)&&void 0!==a?a:0,i=[];for(const n of h){if(e>=t)break;const r=t-e;if(r>0&&n.events.length>0){const t=Object.assign(Object.assign({},n),{events:n.events.slice(0,r)});i.push(t),e+=t.events.length}}h=i}return h}function Pe(e,t,n,i){const r=t.map((e=>"string"==typeof e?e:e.entity)).sort().join("_");return`${o}${e}_${r}_${n}_${i?1:0}`}function Ne(e,t,r=!1){try{const a=localStorage.getItem(e);if(!a)return null;const o=JSON.parse(a),s=Date.now(),l=r?1e3*i:function(e){return 60*((null==e?void 0:e.refresh_interval)||n)*1e3}(t);return s-o.timestamp<l?o:(localStorage.removeItem(e),ae(`Cache expired and removed for ${e}`),null)}catch(t){re("Cache error:",t);try{localStorage.removeItem(e)}catch(e){}return null}}function Ae(e,t,n=!1){const i=Ne(e,t,n);return i?[...i.events]:null}function Le(e,t,n,i,r){if(!e||!t)return;const a={element:n};switch(e.action){case"more-info":!function(e,t){if(!e)return;const n=new CustomEvent("hass-more-info",{bubbles:!0,composed:!0,detail:{entityId:e}});t.element.dispatchEvent(n),oe(`Fired more-info event for ${e}`)}(i,a);break;case"navigate":e.navigation_path&&function(e,t){const n=new CustomEvent("location-changed",{bubbles:!0,composed:!0,detail:{replace:!1}});window.history&&window.history.pushState(null,"",e);t.element.dispatchEvent(n),oe(`Navigated to ${e}`)}(e.navigation_path,a);break;case"url":e.url_path&&(o=e.url_path,window.open(o,"_blank"),oe(`Opened URL ${o}`));break;case"toggle":case"expand":r&&r();break;case"call-service":{if(!e.service)return;const[n,i]=e.service.split(".",2);if(!n||!i)return;t.callService(n,i,e.service_data||{});break}case"fire-dom-event":!function(e){const t=new Event("calendar-card-action",{bubbles:!0,composed:!0});e.dispatchEvent(t),oe("Fired DOM event calendar-card-action")}(n)}var o}function Ie(e){e.style.opacity="0",e.style.transition=`opacity ${v}ms ease-out`,setTimeout((()=>{e.parentNode&&(e.parentNode.removeChild(e),oe("Removed hold indicator"))}),v)}function We(e,t,n,i,r,a){const o={activePointerId:null,holdTriggered:!1,holdTimer:null,pendingHoldAction:!1,holdIndicator:null,lastPointerEvent:null,lastActionTime:0},s=a=>{n&&(!o.holdTriggered&&e.tap_action&&(oe("Executing tap action from mdw:action event"),Le(e.tap_action,n,t,i,r)),o.holdTriggered=!1)};t.addEventListener("mdw:action",s),a instanceof HTMLElement&&"attach"in a&&a.attach(t);const l=t=>{var n;o.activePointerId=t.pointerId,o.holdTriggered=!1,o.lastPointerEvent=t,"none"!==(null===(n=e.hold_action)||void 0===n?void 0:n.action)&&(o.holdTimer&&clearTimeout(o.holdTimer),o.holdTimer=window.setTimeout((()=>{o.activePointerId===t.pointerId&&(oe("Hold threshold reached"),o.holdTriggered=!0,o.holdIndicator=function(e,t){const n=document.createElement("div");n.style.position="absolute",n.style.pointerEvents="none",n.style.borderRadius="50%",n.style.backgroundColor=t.vertical_line_color,n.style.opacity=`${b}`,n.style.transform="translate(-50%, -50%) scale(0)",n.style.transition=`transform ${f}ms ease-out`,n.style.left=e.pageX+"px",n.style.top=e.pageY+"px";const i="touch"===e.pointerType?T.TOUCH_SIZE:T.POINTER_SIZE;return n.style.width=`${i}px`,n.style.height=`${i}px`,document.body.appendChild(n),setTimeout((()=>{n.style.transform="translate(-50%, -50%) scale(1)"}),10),oe("Created hold indicator"),n}(t,e))}),g))},d=a=>{o.activePointerId===a.pointerId&&(o.holdTimer&&(clearTimeout(o.holdTimer),o.holdTimer=null),o.activePointerId=null,o.holdTriggered&&e.hold_action&&(oe("Executing hold action on pointer up"),Le(e.hold_action,n,t,i,r)),o.holdIndicator&&(Ie(o.holdIndicator),o.holdIndicator=null))},c=()=>{o.holdTimer&&(clearTimeout(o.holdTimer),o.holdTimer=null),o.activePointerId=null,o.holdTriggered=!1,o.holdIndicator&&(Ie(o.holdIndicator),o.holdIndicator=null)},h=()=>{o.holdTimer&&(clearTimeout(o.holdTimer),o.holdTimer=null),o.activePointerId=null,o.holdTriggered=!1,o.holdIndicator&&(oe("Removing hold indicator on pointer leave"),Ie(o.holdIndicator),o.holdIndicator=null)},u=a=>{"Enter"!==a.key&&" "!==a.key||(a.preventDefault(),e.tap_action&&Le(e.tap_action,n,t,i,r))};return t.addEventListener("mdw:action",s),t.addEventListener("keydown",u),t.addEventListener("pointerdown",l),t.addEventListener("pointerup",d),t.addEventListener("pointercancel",c),t.addEventListener("pointerleave",h),()=>{t.removeEventListener("mdw:action",s),t.removeEventListener("keydown",u),t.removeEventListener("pointerdown",l),t.removeEventListener("pointerup",d),t.removeEventListener("pointercancel",c),t.removeEventListener("pointerleave",h),o.holdTimer&&clearTimeout(o.holdTimer),o.holdIndicator&&Ie(o.holdIndicator),a instanceof HTMLElement&&"detach"in a&&a.detach()}}function Fe(e){if(!e||!e.length)return;const t=e[0];return"string"==typeof t?t:t.entity}function je(e,t){let n;return(...i)=>{clearTimeout(n),n=window.setTimeout((()=>{clearTimeout(n),e(...i)}),t)}}function Ue(e,t){const n=new Map;return Object.assign(((...i)=>{const r=JSON.stringify(i);if(n.has(r))return n.get(r);const a=t?e.call(t,...i):e(...i);return n.set(r,a),a}),{cache:n,clear:()=>n.clear()})}function Re(e,t,n){return function(e){let t=0;for(let n=0;n<e.length;n++){t=(t<<5)-t+e.charCodeAt(n),t|=0}return Math.abs(t).toString(36)}(`calendar_${e.map((e=>"string"==typeof e?e:e.entity)).sort().join("_")}_${t}_${n?1:0}`)}function Ve(){return{beginMeasurement:He,endMeasurement:(e,t,n)=>function(e,t,n){const i=performance.now()-e.startTime,r=t;r.renderTime.push(i),r.renderTime.length>u&&r.renderTime.shift();const a=Je(t);a>n&&re("Poor rendering performance detected",{averageRenderTime:a,eventCount:e.eventCount});return i}(e,t,n||d),getAverageRenderTime:Je}}function He(e){return{startTime:performance.now(),eventCount:e}}function Je(e){if(!e.renderTime.length)return 0;return e.renderTime.reduce(((e,t)=>e+t),0)/e.renderTime.length}function Be(){return{config:Object.assign({},de),events:[],hass:null,isLoading:!0,isExpanded:!1}}function Ge(t){ne(e);const i=Ve(),s=function(e,t){const n=()=>{if("visible"===document.visibilityState){const n=t();Date.now()-n>_&&(oe("Refreshing data after returning from hidden state"),e())}};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}}((()=>t.updateEvents()),(()=>t.performanceMetrics.lastUpdate)),l=function(e,t){let n;const i=()=>{n&&clearTimeout(n);const r=60*t()*1e3;n=window.setTimeout((()=>{e(!1),i()}),r),oe(`Scheduled next refresh in ${t()} minutes`)};return{start:()=>{i()},stop:()=>{n&&(clearTimeout(n),n=void 0)},restart:()=>{n&&clearTimeout(n),i()}}}(((e=!1)=>t.updateEvents(e)),(()=>{var e;return(null===(e=t.config)||void 0===e?void 0:e.refresh_interval)||n})),d=je((()=>t.updateEvents()),y),c=Ue((e=>{var n,i;const r=null===(i=null===(n=t.config)||void 0===n?void 0:n.time_24h)||void 0===i||i;return e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",hour12:!r})}),t),h=Ue((e=>{var n,i;return null===(i=null===(n=t.config)||void 0===n?void 0:n.remove_location_country)||void 0===i||i?e.replace(/,\s*[A-Z]{2}$/,""):e}),t),u=window.setInterval((()=>function(e,t){try{const e=[],i=Date.now(),a=60*((null==t?void 0:t.refresh_interval)||n)*1e3*r;Object.keys(localStorage).filter((e=>e.startsWith(o))).forEach((t=>{try{const n=JSON.parse(localStorage.getItem(t)||"");i-n.timestamp>a&&e.push(t)}catch(n){e.push(t)}})),e.length>0&&(ae(`Cleaned up ${e.length} old cache entries`),e.forEach((e=>localStorage.removeItem(e))))}catch(e){re("Cache cleanup failed:",e)}}(0,t.config)),a);l.start();return{performanceTracker:i,visibilityCleanup:s,refreshTimer:l,cleanupInterval:u,debouncedUpdate:d,memoizedFormatTime:c,memoizedFormatLocation:h,interactionManager:{state:{activePointerId:null,holdTriggered:!1,holdTimer:null,pendingHoldAction:!1,holdIndicator:null,lastPointerEvent:null,lastActionTime:0},container:null,cleanup:null}}}function Ke(e){var t;e.visibilityCleanup&&e.visibilityCleanup(),e.refreshTimer&&e.refreshTimer.stop(),e.cleanupInterval&&clearInterval(e.cleanupInterval),e.interactionManager.cleanup&&(e.interactionManager.cleanup(),e.interactionManager.cleanup=null),e.interactionManager.state.holdTimer&&(clearTimeout(e.interactionManager.state.holdTimer),e.interactionManager.state.holdTimer=null),e.interactionManager.state.holdIndicator&&(oe("Cleaning up orphaned hold indicator in disconnectedCallback"),Ie(e.interactionManager.state.holdIndicator),e.interactionManager.state.holdIndicator=null),e.interactionManager.state.holdTriggered=!1,e.interactionManager.state.pendingHoldAction=!1,e.interactionManager.state.activePointerId=null,function(){const e=document.querySelectorAll('div[style*="pointer-events: none"]');e.length>0&&(oe(`Cleaning up ${e.length} orphaned hold indicators`),e.forEach((e=>{e.parentNode&&e.parentNode.removeChild(e)})))}(),qe(e.renderTimeout,e.memoizedFormatTime,e.memoizedFormatLocation,null===(t=e.interactionManager)||void 0===t?void 0:t.state)}function qe(e,t,n,i){e&&clearTimeout(e),t&&("function"==typeof t?"cache"in t&&t.cache&&t.cache.clear():"object"==typeof t&&(t.clear?t.clear():t.cache&&"clear"in t.cache&&t.cache.clear())),n&&("function"==typeof n?"cache"in n&&n.cache&&n.cache.clear():"object"==typeof n&&(n.clear?n.clear():n.cache&&"clear"in n.cache&&n.cache.clear())),i&&(i.holdTimer&&(clearTimeout(i.holdTimer),i.holdTimer=null),i.holdIndicator&&(oe("Cleaning up hold indicator in unified cleanup method"),Ie(i.holdIndicator),i.holdIndicator=null),i.holdTriggered=!1,i.pendingHoldAction=!1,i.activePointerId=null)}function Ye(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function Ze(e){return`\n    ${function(e){return`\n    :host {\n      --card-font-size-title: ${e.title_font_size};\n      --card-font-size-weekday: ${e.weekday_font_size};\n      --card-font-size-day: ${e.day_font_size};\n      --card-font-size-month: ${e.month_font_size};\n      --card-font-size-event: ${e.event_font_size};\n      --card-font-size-time: ${e.time_font_size};\n      --card-font-size-location: ${e.location_font_size};\n      --card-color-title: ${e.title_color};\n      --card-color-weekday: ${e.weekday_color};\n      --card-color-day: ${e.day_color};\n      --card-color-month: ${e.month_color};\n      --card-color-event: ${e.event_color};\n      --card-color-time: ${e.time_color};\n      --card-color-location: ${e.location_color};\n      --card-line-color-vertical: ${e.vertical_line_color};\n      --card-line-color-horizontal: ${e.horizontal_line_color};\n      --card-line-width-vertical: ${e.vertical_line_width};\n      --card-line-width-horizontal: ${e.horizontal_line_width};\n      --card-spacing-row: ${e.row_spacing};\n      --card-spacing-additional: ${e.additional_card_spacing};\n      --card-icon-size: ${e.time_location_icon_size};\n      --card-date-column-width: ${1.75*parseFloat(e.day_font_size)}px;\n      --card-custom-background: ${e.background_color};\n      --ha-ripple-hover-opacity: ${w.HOVER};\n      --ha-ripple-hover-color: ${e.vertical_line_color};\n      --ha-ripple-pressed-opacity: ${w.PRESSED};\n      --ha-ripple-pressed-color: ${e.vertical_line_color};\n    }\n  `}(e)}\n    \n\n    :host {\n      display: block;\n    }\n\n    .card-container {\n      cursor: pointer;\n      width: 100%;\n      height: 100%;\n      position: relative;\n      overflow: hidden;\n      border-radius: var(--ha-card-border-radius, 10px);\n      transition: transform 180ms ease-in-out;\n    }\n    \n    .background {\n      position: absolute;\n      top: 0;\n      left: 0;\n      bottom: 0;\n      right: 0;\n      border-radius: var(--ha-card-border-radius, 12px);\n      margin: calc(-1 * var(--ha-card-border-width, 1px));\n      overflow: hidden;\n    }\n    \n    .content-container {\n      position: relative;\n      z-index: 1;\n    }\n    \n    .card-content {\n      background: var(--card-custom-background, var(--card-background-color, #FFF));\n      border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color));\n      border-radius: var(--ha-card-border-radius, 10px);\n      padding: 16px;\n      padding-top: calc(16px + var(--card-spacing-additional));\n      padding-bottom: calc(16px + var(--card-spacing-additional));\n    }\n\n    .title {\n      font-size: var(--card-font-size-title);\n      line-height: var(--card-font-size-title);\n      font-weight: 500;\n      color: var(--card-color-title);\n      margin-top: 0px;\n      margin-bottom: 16px;\n    }\n\n    ha-icon {\n      margin-right: 4px;\n      --mdc-icon-size: var(--card-icon-size);\n      vertical-align: middle;\n      position: relative;\n      transform: translateZ(0);\n    }\n\n    table {\n      width: 100%;\n      table-layout: fixed;\n      border-spacing: 0;\n      margin-bottom: var(--card-spacing-row);\n      border-bottom: var(--card-line-width-horizontal) solid var(--card-line-color-horizontal);\n      padding-bottom: var(--card-spacing-row);\n    }\n\n    .date {\n      width: var(--card-date-column-width);\n      text-align: center;\n      padding-right: 12px;\n      border-right: var(--card-line-width-vertical) solid var(--card-line-color-vertical);\n    }\n\n    .weekday {\n      font-size: var(--card-font-size-weekday);\n      line-height: var(--card-font-size-weekday);\n      color: var(--card-color-weekday);\n    }\n\n    .day {\n      font-size: var(--card-font-size-day);\n      line-height: var(--card-font-size-day);\n      font-weight: 500;\n      color: var(--card-color-day);\n    }\n\n    .month {\n      font-size: var(--card-font-size-month);\n      line-height: var(--card-font-size-month);\n      text-transform: uppercase;\n      color: var(--card-color-month);\n    }\n    .event {\n      padding-left: 12px;\n    }\n    \n    .event-not-first {\n      padding-top: 4px;\n    }\n    \n    .event-title {\n      font-size: var(--card-font-size-event);\n      font-weight: 500;\n      color: var(--card-color-event);\n    }\n\n    .time-location {\n      display: flex;\n      flex-direction: column;\n      margin-top: 0px;\n    }\n\n    .time, .location {\n      display: flex;\n      align-items: center;\n      line-height: 1.2;\n      margin-top: 2px;\n    }\n    \n    .time ha-icon, .location ha-icon {\n      flex-shrink: 0;\n      display: inline-flex;\n      align-items: center;\n      justify-content: center;\n      height: var(--card-icon-size);\n      width: var(--card-icon-size);\n      vertical-align: top;\n      position: relative;\n      top: 0px;\n    }\n    \n    .time span, .location span {\n      display: inline-block;\n      vertical-align: middle;\n    }\n    \n    .time {\n      font-size: var(--card-font-size-time);\n      color: var(--card-color-time);\n    }\n\n    .location {\n      font-size: var(--card-font-size-location);\n      color: var(--card-color-location);\n    }\n\n    table:last-of-type {\n      margin-bottom: 0;\n      border-bottom: 0;\n      padding-bottom: 0;\n    }\n\n    .no-events {\n      text-align: center;\n      color: var(--secondary-text-color);\n      font-style: italic;\n      padding: 16px;\n    }\n  \n  `}async function Qe(e,t,n,i,r,a){const o=document.createElement("div");if(o.className="card-content",e.title){const t=document.createElement("h2");t.className="title",t.textContent=e.title,o.appendChild(t)}const s=await async function(e,t,n,i,r=c,a=h){if(!e.length){const e=document.createDocumentFragment(),t=document.createElement("div");return t.className="no-events",t.textContent="No upcoming events",e.appendChild(t),e}const o=document.createDocumentFragment(),s=async l=>{const d=e.slice(l,l+r);d.length&&(d.forEach((e=>{if(0===e.events.length)return;const r=document.createElement("table");r.innerHTML=function(e,t,n,i){return e.events.map(((r,a)=>{const o=function(e,t){if(!e)return H;const n=t.entities.find((t=>"string"==typeof t&&t===e||"object"==typeof t&&t.entity===e));return n?"string"==typeof n?H:n.color||H:H}(r._entityId,t),s=a>0?"event event-not-first":"event";return`\n    <tr>\n      ${0===a?`\n        <td class="date" rowspan="${e.events.length}">\n          <div class="date-content">\n            <div class="weekday">${e.weekday}</div>\n            <div class="day">${e.day}</div>\n            ${t.show_month?`<div class="month">${e.month}</div>`:""}\n          </div>\n        </td>\n      `:""}\n      <td class="${s}">\n        <div class="event-content">\n          <div class="event-title" style="color: ${o}">${r.summary}</div>\n          <div class="time-location">\n            <div class="time">\n              <ha-icon icon="mdi:clock-outline"></ha-icon>\n              <span>${n(r)}</span>\n            </div>\n            ${r.location&&t.show_location?`\n              <div class="location">\n                <ha-icon icon="mdi:map-marker"></ha-icon>\n                <span>${i(r.location)}</span>\n              </div>\n            `:""}\n          </div>\n        </div>\n      </td>\n    </tr>\n  `})).join("")}(e,t,n,i),o.appendChild(r)})),l+r<e.length&&(await new Promise((e=>setTimeout(e,a))),await s(l+r)))};return await s(0),o}(t,e,n,i,r,a);o.appendChild(s);const l=document.createElement("style");return l.textContent=Ze(e),{container:o,style:l}}function Xe(e,t,n){Ye(e);const i=function(e,t){if("loading"===e){const e=document.createElement("div");e.className="card-container";const n=document.createElement("div");n.className="card-content",n.innerHTML=`\n      <div style="text-align: center; color: ${H};">\n        ${Te(t.language,"loading")}\n      </div>`,e.appendChild(n);const i=document.createElement("style");return i.textContent=Ze(t),{container:e,style:i}}if("empty"===e){const e=new Date,n={weekday:ke(t.language,e.getDay()),day:e.getDate(),month:Se(t.language,e.getMonth()),events:[{summary:Te(t.language,"noEvents"),time:"",location:"",_entityId:""}]},i=document.createElement("div");i.className="card-container";const r=document.createElement("div");r.className="card-content";const a=t.event_color||`${H}`;r.innerHTML=`\n      <table>\n        <tr>\n          <td class="date" rowspan="1">\n            <div class="date-content">\n              <div class="weekday">${n.weekday}</div>\n              <div class="day">${n.day}</div>\n              ${t.show_month?`<div class="month">${n.month}</div>`:""}\n            </div>\n          </td>\n          <td class="event">\n            <div class="event-content">\n              <div class="event-title" style="color: ${a}">\n                ${n.events[0].summary}\n              </div>\n            </div>\n          </td>\n        </tr>\n      </table>`,i.appendChild(r);const o=document.createElement("style");return o.textContent=Ze(t),{container:i,style:o}}const n={error:`<p style="color: var(--error-color, red);">${Te(t.language,"error")}</p>`},i=`\n    <div class="card-content">\n      ${n[e]}\n    </div>\n  `,r="\n    .card-content {\n      background: var(--card-background-color, #FFF);\n      border: var(--ha-card-border-width, 1px) solid var(--ha-card-border-color, var(--divider-color));\n      border-radius: var(--ha-card-border-radius, 10px);\n      padding: 16px;\n      color: var(--primary-text-color);\n      text-align: center;\n    }\n  ";return{html:i,styleText:r}}(t,n);"container"in i&&"style"in i?(e.appendChild(i.style),e.appendChild(i.container)):e.innerHTML=`\n      <style>${i.styleText}</style>\n      ${i.html}\n    `}class et extends HTMLElement{setConfig(e){}}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const tt=globalThis,nt=tt.ShadowRoot&&(void 0===tt.ShadyCSS||tt.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,it=Symbol(),rt=new WeakMap;class at{constructor(e,t,n){if(this._$cssResult$=!0,n!==it)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this._strings=t}get styleSheet(){let e=this._styleSheet;const t=this._strings;if(nt&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=rt.get(t)),void 0===e&&((this._styleSheet=e=new CSSStyleSheet).replaceSync(this.cssText),n&&rt.set(t,e))}return e}toString(){return this.cssText}}const ot=e=>{let t="";for(const n of e.cssRules)t+=n.cssText;return new at("string"==typeof(n=t)?n:String(n),void 0,it);var n},st=nt?e=>e:e=>e instanceof CSSStyleSheet?ot(e):e
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */,{is:lt,defineProperty:dt,getOwnPropertyDescriptor:ct,getOwnPropertyNames:ht,getOwnPropertySymbols:ut,getPrototypeOf:pt}=Object,mt=globalThis;let gt;const ft=mt.trustedTypes,vt=ft?ft.emptyScript:"",yt=mt.reactiveElementPolyfillSupportDevMode;{const e=mt.litIssuedWarnings??=new Set;gt=(t,n)=>{n+=` See https://lit.dev/msg/${t} for more information.`,e.has(n)||(console.warn(n),e.add(n))},gt("dev-mode","Lit is in dev mode. Not recommended for production!"),mt.ShadyDOM?.inUse&&void 0===yt&&gt("polyfill-support-missing","Shadow DOM is being polyfilled via `ShadyDOM` but the `polyfill-support` module has not been loaded.")}const _t=(e,t)=>e,wt={toAttribute(e,t){switch(t){case Boolean:e=e?vt:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(e){n=null}}return n}},bt=(e,t)=>!lt(e,t),Tt={attribute:!0,type:String,converter:wt,reflect:!1,hasChanged:bt};Symbol.metadata??=Symbol("metadata"),mt.litPropertyMetadata??=new WeakMap;class $t extends HTMLElement{static addInitializer(e){this.__prepare(),(this._initializers??=[]).push(e)}static get observedAttributes(){return this.finalize(),this.__attributeToPropertyMap&&[...this.__attributeToPropertyMap.keys()]}static createProperty(e,t=Tt){if(t.state&&(t.attribute=!1),this.__prepare(),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol.for(`${String(e)} (@property() cache)`),i=this.getPropertyDescriptor(e,n,t);void 0!==i&&dt(this.prototype,e,i)}}static getPropertyDescriptor(e,t,n){const{get:i,set:r}=ct(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};if(null==i){if("value"in(ct(this.prototype,e)??{}))throw new Error(`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it's actually declared as a value on the prototype. Usually this is due to using @property or @state on a method.`);gt("reactive-property-without-getter",`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it does not have a getter. This will be an error in a future version of Lit.`)}return{get(){return i?.call(this)},set(t){const a=i?.call(this);r.call(this,t),this.requestUpdate(e,a,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Tt}static __prepare(){if(this.hasOwnProperty(_t("elementProperties")))return;const e=pt(this);e.finalize(),void 0!==e._initializers&&(this._initializers=[...e._initializers]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(_t("finalized")))return;if(this.finalized=!0,this.__prepare(),this.hasOwnProperty(_t("properties"))){const e=this.properties,t=[...ht(e),...ut(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this.__attributeToPropertyMap=new Map;for(const[e,t]of this.elementProperties){const n=this.__attributeNameForProperty(e,t);void 0!==n&&this.__attributeToPropertyMap.set(n,e)}this.elementStyles=this.finalizeStyles(this.styles),this.hasOwnProperty("createProperty")&&gt("no-override-create-property","Overriding ReactiveElement.createProperty() is deprecated. The override will not be called with standard decorators"),this.hasOwnProperty("getPropertyDescriptor")&&gt("no-override-get-property-descriptor","Overriding ReactiveElement.getPropertyDescriptor() is deprecated. The override will not be called with standard decorators")}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(st(e))}else void 0!==e&&t.push(st(e));return t}static __attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this.__instanceProperties=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.__reflectingProperty=null,this.__initialize()}__initialize(){this.__updatePromise=new Promise((e=>this.enableUpdating=e)),this._$changedProperties=new Map,this.__saveInstanceProperties(),this.requestUpdate(),this.constructor._initializers?.forEach((e=>e(this)))}addController(e){(this.__controllers??=new Set).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this.__controllers?.delete(e)}__saveInstanceProperties(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this.__instanceProperties=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(nt)e.adoptedStyleSheets=t.map((e=>e instanceof CSSStyleSheet?e:e.styleSheet));else for(const n of t){const t=document.createElement("style"),i=tt.litNonce;void 0!==i&&t.setAttribute("nonce",i),t.textContent=n.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this.__controllers?.forEach((e=>e.hostConnected?.()))}enableUpdating(e){}disconnectedCallback(){this.__controllers?.forEach((e=>e.hostDisconnected?.()))}attributeChangedCallback(e,t,n){this._$attributeToProperty(e,n)}__propertyToAttribute(e,t){const n=this.constructor.elementProperties.get(e),i=this.constructor.__attributeNameForProperty(e,n);if(void 0!==i&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:wt).toAttribute(t,n.type);this.constructor.enabledWarnings.includes("migration")&&void 0===r&&gt("undefined-attribute-value",`The attribute value for the ${e} property is undefined on element ${this.localName}. The attribute will be removed, but in the previous version of \`ReactiveElement\`, the attribute would not have changed.`),this.__reflectingProperty=e,null==r?this.removeAttribute(i):this.setAttribute(i,r),this.__reflectingProperty=null}}_$attributeToProperty(e,t){const n=this.constructor,i=n.__attributeToPropertyMap.get(e);if(void 0!==i&&this.__reflectingProperty!==i){const e=n.getPropertyOptions(i),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:wt;this.__reflectingProperty=i,this[i]=r.fromAttribute(t,e.type),this.__reflectingProperty=null}}requestUpdate(e,t,n){if(void 0!==e){e instanceof Event&&gt("","The requestUpdate() method was called with an Event as the property name. This is probably a mistake caused by binding this.requestUpdate as an event listener. Instead bind a function that will call it with no arguments: () => this.requestUpdate()"),n??=this.constructor.getPropertyOptions(e);if(!(n.hasChanged??bt)(this[e],t))return;this._$changeProperty(e,t,n)}!1===this.isUpdatePending&&(this.__updatePromise=this.__enqueueUpdate())}_$changeProperty(e,t,n){this._$changedProperties.has(e)||this._$changedProperties.set(e,t),!0===n.reflect&&this.__reflectingProperty!==e&&(this.__reflectingProperties??=new Set).add(e)}async __enqueueUpdate(){this.isUpdatePending=!0;try{await this.__updatePromise}catch(e){Promise.reject(e)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){const e=this.performUpdate();return this.constructor.enabledWarnings.includes("async-perform-update")&&"function"==typeof e?.then&&gt("async-perform-update",`Element ${this.localName} returned a Promise from performUpdate(). This behavior is deprecated and will be removed in a future version of ReactiveElement.`),e}performUpdate(){if(!this.isUpdatePending)return;var e;if(e={kind:"update"},mt.emitLitDebugLogEvents&&mt.dispatchEvent(new CustomEvent("lit-debug",{detail:e})),!this.hasUpdated){this.renderRoot??=this.createRenderRoot();{const e=[...this.constructor.elementProperties.keys()].filter((e=>this.hasOwnProperty(e)&&e in pt(this)));if(e.length)throw new Error(`The following properties on element ${this.localName} will not trigger updates as expected because they are set using class fields: ${e.join(", ")}. Native class fields and some compiled output will overwrite accessors used for detecting changes. See https://lit.dev/msg/class-field-shadowing for more information.`)}if(this.__instanceProperties){for(const[e,t]of this.__instanceProperties)this[e]=t;this.__instanceProperties=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e)!0!==n.wrapped||this._$changedProperties.has(t)||void 0===this[t]||this._$changeProperty(t,this[t],n)}let t=!1;const n=this._$changedProperties;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),this.__controllers?.forEach((e=>e.hostUpdate?.())),this.update(n)):this.__markUpdated()}catch(e){throw t=!1,this.__markUpdated(),e}t&&this._$didUpdate(n)}willUpdate(e){}_$didUpdate(e){this.__controllers?.forEach((e=>e.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e),this.isUpdatePending&&this.constructor.enabledWarnings.includes("change-in-update")&&gt("change-in-update",`Element ${this.localName} scheduled an update (generally because a property was set) after an update completed, causing a new update to be scheduled. This is inefficient and should be avoided unless the next update can only be scheduled as a side effect of the previous update.`)}__markUpdated(){this._$changedProperties=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.__updatePromise}shouldUpdate(e){return!0}update(e){this.__reflectingProperties&&=this.__reflectingProperties.forEach((e=>this.__propertyToAttribute(e,this[e]))),this.__markUpdated()}updated(e){}firstUpdated(e){}}$t.elementStyles=[],$t.shadowRootOptions={mode:"open"},$t[_t("elementProperties")]=new Map,$t[_t("finalized")]=new Map,yt?.({ReactiveElement:$t});{$t.enabledWarnings=["change-in-update","async-perform-update"];const e=function(e){e.hasOwnProperty(_t("enabledWarnings"))||(e.enabledWarnings=e.enabledWarnings.slice())};$t.enableWarning=function(t){e(this),this.enabledWarnings.includes(t)||this.enabledWarnings.push(t)},$t.disableWarning=function(t){e(this);const n=this.enabledWarnings.indexOf(t);n>=0&&this.enabledWarnings.splice(n,1)}}(mt.reactiveElementVersions??=[]).push("2.0.4"),mt.reactiveElementVersions.length>1&&gt("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const kt=globalThis,St=e=>{kt.emitLitDebugLogEvents&&kt.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))};let Dt,Et=0;kt.litIssuedWarnings??=new Set,Dt=(e,t)=>{t+=e?` See https://lit.dev/msg/${e} for more information.`:"",kt.litIssuedWarnings.has(t)||(console.warn(t),kt.litIssuedWarnings.add(t))},Dt("dev-mode","Lit is in dev mode. Not recommended for production!");const xt=kt.ShadyDOM?.inUse&&!0===kt.ShadyDOM?.noPatch?kt.ShadyDOM.wrap:e=>e,Ct=kt.trustedTypes,Ot=Ct?Ct.createPolicy("lit-html",{createHTML:e=>e}):void 0,Mt=e=>e,zt=(e,t,n)=>Mt,Pt=e=>{if(an!==zt)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");an=e},Nt=()=>{an=zt},At=(e,t,n)=>an(e,t,n),Lt="$lit$",It=`lit$${Math.random().toFixed(9).slice(2)}$`,Wt="?"+It,Ft=`<${Wt}>`,jt=document,Ut=()=>jt.createComment(""),Rt=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Vt=Array.isArray,Ht="[ \t\n\f\r]",Jt=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Bt=/-->/g,Gt=/>/g,Kt=new RegExp(`>|${Ht}(?:([^\\s"'>=/]+)(${Ht}*=${Ht}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),qt=/'/g,Yt=/"/g,Zt=/^(?:script|style|textarea|title)$/i,Qt=(Xt=1,(e,...t)=>(e.some((e=>void 0===e))&&console.warn("Some template strings are undefined.\nThis is probably caused by illegal octal escape sequences."),t.some((e=>e?._$litStatic$))&&Dt("","Static values 'literal' or 'unsafeStatic' cannot be used as values to non-static templates.\nPlease use the static 'html' tag function. See https://lit.dev/docs/templates/expressions/#static-expressions"),{_$litType$:Xt,strings:e,values:t}));var Xt;const en=Symbol.for("lit-noChange"),tn=Symbol.for("lit-nothing"),nn=new WeakMap,rn=jt.createTreeWalker(jt,129);let an=zt;function on(e,t){if(!Vt(e)||!e.hasOwnProperty("raw")){let e="invalid template strings array";throw e="\n          Internal Error: expected template strings to be an array\n          with a 'raw' field. Faking a template strings array by\n          calling html or svg like an ordinary function is effectively\n          the same as calling unsafeHtml and can lead to major security\n          issues, e.g. opening your code up to XSS attacks.\n          If you're using the html or svg tagged template functions normally\n          and still seeing this error, please file a bug at\n          https://github.com/lit/lit/issues/new?template=bug_report.md\n          and include information about your build tooling, if any.\n        ".trim().replace(/\n */g,"\n"),new Error(e)}return void 0!==Ot?Ot.createHTML(t):t}class sn{constructor({strings:e,_$litType$:t},n){let i;this.parts=[];let r=0,a=0;const o=e.length-1,s=this.parts,[l,d]=((e,t)=>{const n=e.length-1,i=[];let r,a=2===t?"<svg>":3===t?"<math>":"",o=Jt;for(let t=0;t<n;t++){const n=e[t];let s,l,d=-1,c=0;for(;c<n.length&&(o.lastIndex=c,l=o.exec(n),null!==l);)if(c=o.lastIndex,o===Jt){if("!--"===l[1])o=Bt;else if(void 0!==l[1])o=Gt;else if(void 0!==l[2])Zt.test(l[2])&&(r=new RegExp(`</${l[2]}`,"g")),o=Kt;else if(void 0!==l[3])throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else o===Kt?">"===l[0]?(o=r??Jt,d=-1):void 0===l[1]?d=-2:(d=o.lastIndex-l[2].length,s=l[1],o=void 0===l[3]?Kt:'"'===l[3]?Yt:qt):o===Yt||o===qt?o=Kt:o===Bt||o===Gt?o=Jt:(o=Kt,r=void 0);console.assert(-1===d||o===Kt||o===qt||o===Yt,"unexpected parse state B");const h=o===Kt&&e[t+1].startsWith("/>")?" ":"";a+=o===Jt?n+Ft:d>=0?(i.push(s),n.slice(0,d)+Lt+n.slice(d)+It+h):n+It+(-2===d?t:h)}return[on(e,a+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),i]})(e,t);if(this.el=sn.createElement(l,n),rn.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(i=rn.nextNode())&&s.length<o;){if(1===i.nodeType){{const e=i.localName;if(/^(?:textarea|template)$/i.test(e)&&i.innerHTML.includes(It)){const t=`Expressions are not supported inside \`${e}\` elements. See https://lit.dev/msg/expression-in-${e} for more information.`;if("template"===e)throw new Error(t);Dt("",t)}}if(i.hasAttributes())for(const e of i.getAttributeNames())if(e.endsWith(Lt)){const t=d[a++],n=i.getAttribute(e).split(It),o=/([.?@])?(.*)/.exec(t);s.push({type:1,index:r,name:o[2],strings:n,ctor:"."===o[1]?un:"?"===o[1]?pn:"@"===o[1]?mn:hn}),i.removeAttribute(e)}else e.startsWith(It)&&(s.push({type:6,index:r}),i.removeAttribute(e));if(Zt.test(i.tagName)){const e=i.textContent.split(It),t=e.length-1;if(t>0){i.textContent=Ct?Ct.emptyScript:"";for(let n=0;n<t;n++)i.append(e[n],Ut()),rn.nextNode(),s.push({type:2,index:++r});i.append(e[t],Ut())}}}else if(8===i.nodeType){if(i.data===Wt)s.push({type:2,index:r});else{let e=-1;for(;-1!==(e=i.data.indexOf(It,e+1));)s.push({type:7,index:r}),e+=It.length-1}}r++}if(d.length!==a)throw new Error('Detected duplicate attribute bindings. This occurs if your template has duplicate attributes on an element tag. For example "<input ?disabled=${true} ?disabled=${false}>" contains a duplicate "disabled" attribute. The error was detected in the following template: \n`'+e.join("${...}")+"`");St&&St({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){const n=jt.createElement("template");return n.innerHTML=e,n}}function ln(e,t,n=e,i){if(t===en)return t;let r=void 0!==i?n.__directives?.[i]:n.__directive;const a=Rt(t)?void 0:t._$litDirective$;return r?.constructor!==a&&(r?._$notifyDirectiveConnectionChanged?.(!1),void 0===a?r=void 0:(r=new a(e),r._$initialize(e,n,i)),void 0!==i?(n.__directives??=[])[i]=r:n.__directive=r),void 0!==r&&(t=ln(e,r._$resolve(e,t.values),r,i)),t}class dn{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){const{el:{content:t},parts:n}=this._$template,i=(e?.creationScope??jt).importNode(t,!0);rn.currentNode=i;let r=rn.nextNode(),a=0,o=0,s=n[0];for(;void 0!==s;){if(a===s.index){let t;2===s.type?t=new cn(r,r.nextSibling,this,e):1===s.type?t=new s.ctor(r,s.name,s.strings,this,e):6===s.type&&(t=new gn(r,this,e)),this._$parts.push(t),s=n[++o]}a!==s?.index&&(r=rn.nextNode(),a++)}return rn.currentNode=jt,i}_update(e){let t=0;for(const n of this._$parts)void 0!==n&&(St&&St({kind:"set part",part:n,value:e[t],valueIndex:t,values:e,templateInstance:this}),void 0!==n.strings?(n._$setValue(e,n,t),t+=n.strings.length-2):n._$setValue(e[t])),t++}}class cn{get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}constructor(e,t,n,i){this.type=2,this._$committedValue=tn,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=n,this.options=i,this.__isConnected=i?.isConnected??!0,this._textSanitizer=void 0}get parentNode(){let e=xt(this._$startNode).parentNode;const t=this._$parent;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){if(null===this.parentNode)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=ln(this,e,t),Rt(e))e===tn||null==e||""===e?(this._$committedValue!==tn&&(St&&St({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=tn):e!==this._$committedValue&&e!==en&&this._commitText(e);else if(void 0!==e._$litType$)this._commitTemplateResult(e);else if(void 0!==e.nodeType){if(this.options?.host===e)return this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]"),void console.warn("Attempted to render the template host",e,"inside itself. This is almost always a mistake, and in dev mode ","we render some warning text. In production however, we'll ","render it, which will usually result in an error, and sometimes ","in the element disappearing from the DOM.");this._commitNode(e)}else(e=>Vt(e)||"function"==typeof e?.[Symbol.iterator])(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return xt(xt(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){if(this._$committedValue!==e){if(this._$clear(),an!==zt){const e=this._$startNode.parentNode?.nodeName;if("STYLE"===e||"SCRIPT"===e){let t="Forbidden";throw t="STYLE"===e?"Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":"Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(t)}}St&&St({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==tn&&Rt(this._$committedValue)){const t=xt(this._$startNode).nextSibling;void 0===this._textSanitizer&&(this._textSanitizer=At(t,"data","property")),e=this._textSanitizer(e),St&&St({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{const t=jt.createTextNode("");this._commitNode(t),void 0===this._textSanitizer&&(this._textSanitizer=At(t,"data","property")),e=this._textSanitizer(e),St&&St({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){const{values:t,_$litType$:n}=e,i="number"==typeof n?this._$getTemplate(e):(void 0===n.el&&(n.el=sn.createElement(on(n.h,n.h[0]),this.options)),n);if(this._$committedValue?._$template===i)St&&St({kind:"template updating",template:i,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:t}),this._$committedValue._update(t);else{const e=new dn(i,this),n=e._clone(this.options);St&&St({kind:"template instantiated",template:i,instance:e,parts:e._$parts,options:this.options,fragment:n,values:t}),e._update(t),St&&St({kind:"template instantiated and updated",template:i,instance:e,parts:e._$parts,options:this.options,fragment:n,values:t}),this._commitNode(n),this._$committedValue=e}}_$getTemplate(e){let t=nn.get(e.strings);return void 0===t&&nn.set(e.strings,t=new sn(e)),t}_commitIterable(e){Vt(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let n,i=0;for(const r of e)i===t.length?t.push(n=new cn(this._insert(Ut()),this._insert(Ut()),this,this.options)):n=t[i],n._$setValue(r),i++;i<t.length&&(this._$clear(n&&xt(n._$endNode).nextSibling,i),t.length=i)}_$clear(e=xt(this._$startNode).nextSibling,t){for(this._$notifyConnectionChanged?.(!1,!0,t);e&&e!==this._$endNode;){const t=xt(e).nextSibling;xt(e).remove(),e=t}}setConnected(e){if(void 0!==this._$parent)throw new Error("part.setConnected() may only be called on a RootPart returned from render().");this.__isConnected=e,this._$notifyConnectionChanged?.(e)}}class hn{get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(e,t,n,i,r){this.type=1,this._$committedValue=tn,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=i,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$committedValue=new Array(n.length-1).fill(new String),this.strings=n):this._$committedValue=tn,this._sanitizer=void 0}_$setValue(e,t=this,n,i){const r=this.strings;let a=!1;if(void 0===r)e=ln(this,e,t,0),a=!Rt(e)||e!==this._$committedValue&&e!==en,a&&(this._$committedValue=e);else{const i=e;let o,s;for(e=r[0],o=0;o<r.length-1;o++)s=ln(this,i[n+o],t,o),s===en&&(s=this._$committedValue[o]),a||=!Rt(s)||s!==this._$committedValue[o],s===tn?e=tn:e!==tn&&(e+=(s??"")+r[o+1]),this._$committedValue[o]=s}a&&!i&&this._commitValue(e)}_commitValue(e){e===tn?xt(this.element).removeAttribute(this.name):(void 0===this._sanitizer&&(this._sanitizer=an(this.element,this.name,"attribute")),e=this._sanitizer(e??""),St&&St({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),xt(this.element).setAttribute(this.name,e??""))}}class un extends hn{constructor(){super(...arguments),this.type=3}_commitValue(e){void 0===this._sanitizer&&(this._sanitizer=an(this.element,this.name,"property")),e=this._sanitizer(e),St&&St({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===tn?void 0:e}}class pn extends hn{constructor(){super(...arguments),this.type=4}_commitValue(e){St&&St({kind:"commit boolean attribute",element:this.element,name:this.name,value:!(!e||e===tn),options:this.options}),xt(this.element).toggleAttribute(this.name,!!e&&e!==tn)}}class mn extends hn{constructor(e,t,n,i,r){if(super(e,t,n,i,r),this.type=5,void 0!==this.strings)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){if((e=ln(this,e,t,0)??tn)===en)return;const n=this._$committedValue,i=e===tn&&n!==tn||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==tn&&(n===tn||i);St&&St({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:i,addListener:r,oldListener:n}),i&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){"function"==typeof this._$committedValue?this._$committedValue.call(this.options?.host??this.element,e):this._$committedValue.handleEvent(e)}}class gn{constructor(e,t,n){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=n}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){St&&St({kind:"commit to element binding",element:this.element,value:e,options:this.options}),ln(this,e)}}const fn=kt.litHtmlPolyfillSupportDevMode;fn?.(sn,cn),(kt.litHtmlVersions??=[]).push("3.2.1"),kt.litHtmlVersions.length>1&&Dt("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");const vn=(e,t,n)=>{if(null==t)throw new TypeError(`The container to render into may not be ${t}`);const i=Et++,r=n?.renderBefore??t;let a=r._$litPart$;if(St&&St({kind:"begin render",id:i,value:e,container:t,options:n,part:a}),void 0===a){const e=n?.renderBefore??null;r._$litPart$=a=new cn(t.insertBefore(Ut(),e),e,void 0,n??{})}return a._$setValue(e),St&&St({kind:"end render",id:i,value:e,container:t,options:n,part:a}),a};vn.setSanitizer=Pt,vn.createSanitizer=At,vn._testOnlyClearSanitizerFactoryDoNotCallOrElse=Nt;let yn;{const e=globalThis.litIssuedWarnings??=new Set;yn=(t,n)=>{n+=` See https://lit.dev/msg/${t} for more information.`,e.has(n)||(console.warn(n),e.add(n))}}class _n extends $t{constructor(){super(...arguments),this.renderOptions={host:this},this.__childPart=void 0}createRenderRoot(){const e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this.__childPart=vn(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.__childPart?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.__childPart?.setConnected(!1)}render(){return en}}var wn;_n._$litElement$=!0,_n[(wn="finalized",wn)]=!0,globalThis.litElementHydrateSupport?.({LitElement:_n});const bn=globalThis.litElementPolyfillSupportDevMode;bn?.({LitElement:_n}),(globalThis.litElementVersions??=[]).push("4.1.1"),globalThis.litElementVersions.length>1&&yn("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.");class Tn extends _n{constructor(){super(...arguments),this._disabled=!1,this.control=null,this.haRipple=null,this._handleClick=()=>{const e=new CustomEvent("mdw:action",{bubbles:!0,composed:!0,detail:{source:"click"}});this.control?this.control.dispatchEvent(e):this.dispatchEvent(e)}}get disabled(){return this._disabled}set disabled(e){const t=this._disabled;this._disabled=e,this.requestUpdate("disabled",t),e?this.setAttribute("disabled",""):this.removeAttribute("disabled")}connectedCallback(){super.connectedCallback(),this.haRipple=document.createElement("ha-ripple"),this.appendChild(this.haRipple),this.control&&this.attachRipple(this.control)}attach(e){this.control=e,this.attachRipple(e),e.addEventListener("click",this._handleClick)}detach(){if(this.control){if(this.control.removeEventListener("click",this._handleClick),this.haRipple&&"detach"in this.haRipple)try{this.haRipple.detach()}catch(e){re("Failed to detach ha-ripple:",e)}this.control=null}}attachRipple(e){if(this.haRipple&&"attach"in this.haRipple)try{this.haRipple.attach(e)}catch(e){re("Failed to attach ha-ripple:",e)}}render(){return Qt`<slot></slot>`}}Tn.styles=((e,...t)=>{const n=1===e.length?e[0]:t.reduce(((t,n,i)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.`)})(n)+e[i+1]),e[0]);return new at(n,e,it)})`
    :host {
      display: block;
      position: absolute;
      inset: 0;
      overflow: hidden;
      border-radius: inherit;

      --md-ripple-hover-opacity: var(
        --ha-ripple-hover-opacity,
        ${w.HOVER}
      );
      --md-ripple-pressed-opacity: var(
        --ha-ripple-pressed-opacity,
        ${w.PRESSED}
      );
      --md-ripple-hover-color: var(--ha-ripple-color, var(--primary-color));
      --md-ripple-pressed-color: var(--ha-ripple-color, var(--primary-color));
    }
  `;try{customElements.get("calendar-ripple")||customElements.define("calendar-ripple",Tn)}catch(e){re("Could not register calendar-ripple:",e)}
/**
 * Calendar Card Pro
 *
 * A sleek and highly customizable calendar card for Home Assistant,
 * designed for performance and a clean, modern look.
 *
 * @author Alex Pfau
 * @license MIT
 * @version 1.2.3
 *
 * Project Home: https://github.com/alexpfau/calendar-card-pro
 * Documentation: https://github.com/alexpfau/calendar-card-pro/blob/main/README.md
 *
 * Design inspired by Home Assistant community member @GHA_Steph's button-card calendar design
 * https://community.home-assistant.io/t/calendar-add-on-some-calendar-designs/385790
 *
 * Interaction patterns inspired by Home Assistant's Tile Card
 * and Material Design, both licensed under the Apache License 2.0.
 * https://github.com/home-assistant/frontend/blob/dev/LICENSE.md
 *
 * This package includes lit/LitElement (BSD-3-Clause License)
 */class $n extends HTMLElement{static get DEFAULT_CONFIG(){return de}static get TRANSLATIONS(){return ye}static findCalendarEntity(e){return ce(e.states)}static getStubConfig(e){return function(e){const n=ce(e);return{type:"custom:calendar-card-pro",entities:n?[n]:[],days_to_show:t.DAYS_TO_SHOW,show_location:D,_description:n?void 0:"A calendar card that displays events from multiple calendars with individual styling. Add a calendar integration to Home Assistant to use this card."}}(e.states)}static get displayName(){return"Calendar Card Pro"}constructor(){super(),this.events=[],this._hass=null,this.isLoading=!0,this.isExpanded=!1,this.performanceMetrics={renderTime:[],eventCount:0,lastUpdate:Date.now()},this.attachShadow({mode:"open"}),this.instanceId=Math.random().toString(36).substring(2,15);const e=Be();this.config=e.config,this.events=e.events,this._hass=e.hass,this.isLoading=e.isLoading,this.isExpanded=e.isExpanded;const t=Ge(this);this.performanceTracker=t.performanceTracker,this.visibilityCleanup=t.visibilityCleanup,this.refreshTimer=t.refreshTimer,this.cleanupInterval=t.cleanupInterval,this.debouncedUpdate=t.debouncedUpdate,this.memoizedFormatTime=t.memoizedFormatTime,this.memoizedFormatLocation=t.memoizedFormatLocation,this.interactionManager=t.interactionManager}connectedCallback(){!function(e){var t;if(oe("Connected callback called - checking if rendering needed"),!((null===(t=e.shadowRoot)||void 0===t?void 0:t.childElementCount)&&e.shadowRoot.childElementCount>0)&&e._hass)return oe("No content found after navigation - triggering render"),void e.renderCard();if(e.interactionManager.container&&!e.interactionManager.cleanup&&e._hass){const t=e.interactionManager.container.querySelector("calendar-ripple");if(t)try{"detach"in t&&t.detach(),t.remove()}catch(e){re("Error removing old ripple element:",e)}const n=document.createElement("calendar-ripple");e.interactionManager.container.firstChild?e.interactionManager.container.insertBefore(n,e.interactionManager.container.firstChild):e.interactionManager.container.appendChild(n);const i=Fe(e.config.entities);e.interactionManager.cleanup=We(e.config,e.interactionManager.container,e._hass,i,(()=>e.toggleExpanded()),n),oe("Restored interaction handlers with fresh ripple in connectedCallback")}}(this)}disconnectedCallback(){Ke(this)}set hass(e){const t=this._hass;this._hass=e;this.config.entities.some((n=>{var i,r;return!t||(null===(i=t.states["string"==typeof n?n:n.entity])||void 0===i?void 0:i.state)!==(null===(r=e.states["string"==typeof n?n:n.entity])||void 0===r?void 0:r.state)}))&&this.updateEvents()}setConfig(e){const t=this.config;var n;this.config=Object.assign(Object.assign({},$n.DEFAULT_CONFIG),e),this.config.entities=(n=this.config.entities,Array.isArray(n)?n.map((e=>"string"==typeof e?{entity:e,color:H}:"object"==typeof e&&e.entity?{entity:e.entity,color:e.color||H}:null)).filter(Boolean):[]),this.instanceId=Re(this.config.entities,this.config.days_to_show,this.config.show_past_events);const i=function(e,t){if(!e||0===Object.keys(e).length)return!0;const n=(e.entities||[]).map((e=>"string"==typeof e?e:e.entity)).sort().join(","),i=(t.entities||[]).map((e=>"string"==typeof e?e:e.entity)).sort().join(","),r=(null==e?void 0:e.refresh_interval)!==(null==t?void 0:t.refresh_interval),a=n!==i||e.days_to_show!==t.days_to_show||e.show_past_events!==t.show_past_events;return(a||r)&&oe("Configuration change requires data refresh"),a||r}(t,this.config),r=function(e,t){if(!e||!e.entities)return!1;const n=e.entities,i=t.entities;if(n.length!==i.length)return!1;const r=new Map;n.forEach((e=>{"string"==typeof e?r.set(e,H):r.set(e.entity,e.color||H)}));for(const e of i){const t="string"==typeof e?e:e.entity,n="string"==typeof e?H:e.color||H;if(r.has(t)&&r.get(t)!==n)return oe(`Entity color changed for ${t}, will re-render`),!0}return!1}(t,this.config);i?(oe("Configuration changed, refreshing data"),this.updateEvents(!0)):r?(oe("Entity colors changed, re-rendering without data refresh"),this.renderCard()):this.renderCard(),this.refreshTimer&&this.refreshTimer.restart()}invalidateCache(){!function(e){try{const t=e.filter((e=>null!==localStorage.getItem(e)&&(localStorage.removeItem(e),!0)));t.length>0&&ae(`Invalidated ${t.length} cache entries`)}catch(e){re("Failed to invalidate cache:",e)}}([Pe(this.instanceId,this.config.entities,this.config.days_to_show,this.config.show_past_events)])}async updateEvents(e=!1){await Oe({hass:this._hass,config:this.config,instanceId:this.instanceId,force:e,currentEvents:this.events,callbacks:{setLoading:e=>{this.isLoading=e},setEvents:e=>{this.events=e},updateLastUpdate:()=>{this.performanceMetrics.lastUpdate=Date.now()},renderCallback:()=>{this.renderCard()},restartTimer:()=>{this.refreshTimer&&this.refreshTimer.restart&&(oe("Restarting refresh timer after data fetch"),this.refreshTimer.restart())}}})}async renderCard(){var e;const t=this.performanceTracker.beginMeasurement(this.events.length);if(!Me(this._hass,this.config.entities))return Xe(this.shadowRoot,"error",this.config),void this.performanceTracker.endMeasurement(t,this.performanceMetrics);if(this.isLoading)return Xe(this.shadowRoot,"loading",this.config),void this.performanceTracker.endMeasurement(t,this.performanceMetrics);const n=we(this.config.language,null===(e=this._hass)||void 0===e?void 0:e.locale),i=ze(this.events,this.config,this.isExpanded,n);if(0===i.length)return Xe(this.shadowRoot,"empty",this.config),void this.performanceTracker.endMeasurement(t,this.performanceMetrics);try{oe("Creating card structure");const{container:e,style:t}=await Qe(this.config,i,(e=>De(e,this.config,n)),(e=>Ee(e,this.config.remove_location_country)),c,h);this.interactionManager.cleanup&&(this.interactionManager.cleanup(),this.interactionManager.cleanup=null);const{container:r,ripple:a}=function(e){const t=document.createElement("div");t.className="card-container",t.setAttribute("role","button"),t.setAttribute("tabindex","0");const n=document.createElement("calendar-ripple"),i=document.createElement("div");if(i.className="card-content",e instanceof HTMLElement)for(;e.firstChild;)i.appendChild(e.firstChild);return t.appendChild(n),t.appendChild(i),oe("Created card container structure"),{container:t,ripple:n,content:i}}(e);!function(e,t,n){Ye(e),e.appendChild(n),e.appendChild(t),oe("Updated shadow DOM with card container")}(this.shadowRoot,r,t),this.interactionManager.container=r;const o=Fe(this.config.entities);this.interactionManager.cleanup=We(this.config,r,this._hass,o,(()=>this.toggleExpanded()),a)}catch(e){ie("Render error:",e),Xe(this.shadowRoot,"error",this.config)}this.performanceTracker.endMeasurement(t,this.performanceMetrics)}handleAction(e){const t=Fe(this.config.entities);Le(e,this._hass,this,t,(()=>this.toggleExpanded()))}toggleExpanded(){this.config.max_events_to_show&&(this.isExpanded=!this.isExpanded,setTimeout((()=>this.renderCard()),m))}initializeState(){const e=Be();this.config=e.config,this.events=e.events,this._hass=e.hass,this.isLoading=e.isLoading,this.isExpanded=e.isExpanded}cleanup(){qe(this.renderTimeout,this.memoizedFormatTime,this.memoizedFormatLocation,this.interactionManager.state)}get translations(){var e;return be(we(this.config.language,null===(e=this._hass)||void 0===e?void 0:e.locale))}debounce(e,t){return je(e,t)}memoize(e){return Ue(e,this)}getAverageRenderTime(){return this.performanceTracker.getAverageRenderTime(this.performanceMetrics)}}customElements.define("calendar-card-pro",$n),customElements.define("calendar-card-pro-editor",et),window.customCards=window.customCards||[],window.customCards.push({type:"calendar-card-pro",name:"Calendar Card Pro",preview:!0,description:"A calendar card that supports multiple calendars with individual styling.",documentationURL:"https://github.com/alexpfau/calendar-card-pro"});
//# sourceMappingURL=calendar-card-pro.js.map
