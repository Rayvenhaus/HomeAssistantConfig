---
type: custom:stack-in-card
mode: vertical
keep:
  background: true
  margin: true
  border_radius: true
  outer_padding: true
cards:
  - type: custom:decluttering-card
    template: bubble_header
    variables:
      - name: Internet and Network
      - icon: network
      - navpath: network

  - square: false
    columns: 2
    type: grid
    cards:
      - type: custom:decluttering-card
        template: mushroom_entity_graph_small
        variables:
          - entity: sensor.unifi_gateway_wan_uptimeavail_stats
          - colour: "#8694E7"
          - title: Internet Uptime
          - icon: mdi:timelapse
          - line_width: 2.5
      - type: custom:decluttering-card
        template: mushroom_entity_graph_small
        variables:
          - entity: sensor.unifi_networkstats_connected_devices
          - colour: "#8694E7"
          - title: Network Connected Devices
          - icon: mdi:download-network
          - line_width: 2.5
      - type: custom:decluttering-card
        template: mushroom_entity_graph_small
        variables:
          - entity: sensor.speedtest_download
          - colour: "#8694E7"
          - title: Download
          - icon: mdi:download-network
          - line_width: 2.5
      - type: custom:decluttering-card
        template: mushroom_entity_graph_small
        variables:
          - entity: sensor.speedtest_upload
          - colour: "#8694E7"
          - title: Upload
          - icon: mdi:upload-network
          - line_width: 2.5
      - type: custom:decluttering-card
        template: mushroom_entity_graph_small
        variables:
          - entity: sensor.speedtest_ping
          - colour: "#8694E7"
          - title: Ping
          - icon: mdi:web
          - line_width: 2.5
  - square: false
    columns: 2
    type: grid
    cards:
      - type: custom:mushroom-template-card
        primary: "NBN FTTN Upgrade > Home"
        secondary: >-
          {% set alt_reason_code = states(entity) %}
          {% if alt_reason_code == 'NULL_NA' %}
          Nup :(
          {% elif alt_reason_code == 'FTTP_NA' %}
          Soon, {{state_attr(entity, 'addressDetail')['techChangeStatus']}},
          {{state_attr(entity,
          'addressDetail')['targetEligibilityQuarter']}}
          {% elif alt_reason_code == 'FTTP_SA' %}
          Yes!
          {% else %}
          {% if alt_reason_code %}
            {{ alt_reason_code }} was returned
          {% else %}
            Error
          {% endif %}
          {% endif %}
        icon: mdi:check-network
        tap_action:
          action: none
        hold_action:
          action: none
        double_tap_action:
          action: none
        entity: sensor.nbn_location_home
        icon_color: |-
          {% set alt_reason_code = states(entity) %}
          {% if alt_reason_code == 'NULL_NA' %}
            red
          {% elif alt_reason_code == 'FTTP_NA' %}
            yellow
          {% elif alt_reason_code == 'FTTP_SA' %}
            green
          {% else %}
            grey
          {% endif %}
        card_mod:
          style:
            mushroom-shape-icon$: |
              .shape {
                --shape-color: none !important;
              }
            .: |
              ha-card {
                background-color: var(--background-color);
                --icon-size: 40px;
                --icon-symbol-size: 30px;
                --card-secondary-font-size: 10px;
                --card-primary-font-size: 12px;
                padding-top: 5px !important;
                padding-bottom: 5px !important;
              }
      - type: custom:mushroom-template-card
        primary: "NBN FTTN Upgrade > Work"
        secondary: >-
          {% set alt_reason_code = states(entity) %}
          {% if alt_reason_code == 'NULL_NA' %}
          Nup :(
          {% elif alt_reason_code == 'FTTP_NA' %}
          Soon, {{state_attr(entity, 'addressDetail')['techChangeStatus']}},
          {{state_attr(entity,
          'addressDetail')['targetEligibilityQuarter']}}
          {% elif alt_reason_code == 'FTTP_SA' %}
          Yes!
          {% else %}
          {% if alt_reason_code %}
            {{ alt_reason_code }} was returned
          {% else %}
            Error
          {% endif %}
          {% endif %}
        icon: mdi:check-network
        tap_action:
          action: none
        hold_action:
          action: none
        double_tap_action:
          action: none
        entity: sensor.nbn_location_dadwork
        icon_color: |-
          {% set alt_reason_code = states(entity) %}
          {% if alt_reason_code == 'NULL_NA' %}
            red
          {% elif alt_reason_code == 'FTTP_NA' %}
            yellow
          {% elif alt_reason_code == 'FTTP_SA' %}
            green
          {% else %}
            grey
          {% endif %}
        card_mod:
          style:
            mushroom-shape-icon$: |
              .shape {
                --shape-color: none !important;
              }
            .: |
              ha-card {
                background-color: var(--background-color);
                --icon-size: 40px;
                --icon-symbol-size: 30px;
                --card-secondary-font-size: 10px;
                --card-primary-font-size: 12px;
                padding-top: 5px !important;
                padding-bottom: 5px !important;
              }
