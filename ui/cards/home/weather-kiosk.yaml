---
type: custom:stack-in-card
mode: vertical
keep:
  background: true
  margin: true
  border_radius: true
  outer_padding: true
cards:
  - type: custom:decluttering-card
    template: bubble_header
    variables:
      - name: Weather
      - icon: weather-cloudy-arrow-right
      - navpath: weather

  - square: false
    columns: 3
    type: grid
    cards:
      - type: custom:mushroom-entity-card
        entity: sensor.weather_feels_like_temperature
        name: Feels Like
        fill_container: true
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: &style
          style:
            mushroom-shape-icon$: |
              .shape {
                --shape-color: none !important;

              }
            .: |
              ha-card {
                background-color: var(--background-color);
                --icon-size: 40px;
                --icon-symbol-size: 30px;
                --card-secondary-font-size: 10px;
                --card-primary-font-size: 12px;
                padding-top: 5px !important;
                padding-bottom: 5px !important;
              }
      - type: custom:mushroom-entity-card
        entity: sensor.weather_temperature_daily_high
        name: High Temp
        fill_container: true
        icon: mdi:thermometer-chevron-up
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: *style
      - type: custom:mushroom-entity-card
        entity: sensor.weather_temperature_daily_low
        name: Low Temp
        fill_container: true
        icon: mdi:thermometer-chevron-down
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: *style
      - type: custom:mushroom-entity-card
        entity: sensor.weatherflow_rainfall_weekly
        name: Rainfall (Week)
        fill_container: true
        icon: mdi:weather-lightning-rainy
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: *style
      - type: custom:mushroom-entity-card
        entity: sensor.weatherflow_rainfall_monthly
        name: Rainfall (Month)
        fill_container: true
        icon: mdi:weather-lightning-rainy
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: *style
      - type: custom:mushroom-entity-card
        entity: sensor.weatherflow_rainfall_yearly
        name: Rainfall (Year)
        fill_container: true
        icon: mdi:weather-lightning-rainy
        tap_action:
          action: more-info
        hold_action:
          action: none
        double_tap_action:
          action: none
        card_mod: *style
  - type: conditional
    conditions:
      - condition: numeric_state
        entity: sensor.east_tamworth_warnings
        above: 0
    card:
      type: custom:auto-entities
      card_param: cards
      show_empty: false
      unique: true
      card:
        type: grid
        columns: 1
        square: false
      filter:
        template: |-
          {% for s in state_attr('sensor.east_tamworth_warnings','warnings') -%}
            {{
              {
              "type": "custom:mushroom-template-card",
              "primary": s.short_title,
              "secondary": s.title,
              "multiline_secondary": true,
              "badge_icon": "mdi:alert-circle",
              "badge_color": "red",
              "icon": "phu:weather-page-alt",
              "tap_action": "none",
              "hold_action": "none",
              "fill_container": true,
              "layout": "horizontal",
              "card_mod": {
                "style": {
                  ".": "ha-card {\n  background-color: var(--background-color);\n}\n"
                }}
              }
            }},
          {%- endfor %}
