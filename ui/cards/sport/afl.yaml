---
type: vertical-stack
cards:
  - type: custom:bubble-card
    card_type: separator
    styles: |-
      .bubble-line {
        background: var(--ha-card-background);
        opacity: 1;
        }
    name: Aussie Rules
    icon: mdi:football-australian

  - type: custom:decluttering-card
    template: sports_card
    variables:
      - entity: sensor.upcoming_sport_afl_all_teams
  - type: custom:yet-another-expander-card
    gap: 0.6em
    padding: 0
    clear: false
    title: Expander
    overlay-margin: 0em
    child-padding: 0.5em
    button-background: transparent
    title-card:
      type: custom:mushroom-template-card
      primary: AFL Standings
      icon: mdi:football-australian
      secondary: >
        {%- for x in state_attr('sensor.scoreboard_afl', 'entries') -%}
        {%- set rank = x['stats']|selectattr("name", "eq", "rank")|map(attribute="value")|first -%}
        {%- if rank == 1.0 -%}
        {{x['team']['displayName']}}, {{x['stats']|selectattr("name", "eq", "points")|map(attribute="displayValue")|first}} Pts
        {%- endif -%}
        {%- endfor -%}
      card_mod:
        style:
          .: |
            ha-card {
              # background-color: var(--background-color);
              box-shadow: none;
            }
    cards:
      - type: custom:flex-table-card
        css:
          table+: "padding: 0px; width: 100%; border-collapse: collapse;"
          tbody tr:nth-child(8): "border-bottom: 2px solid rgb(255,215,0) !important;"
          tbody tr+: "user-select: text"
          tbody tr td:nth-child(2)+: "min-width: 1fr;width: 1fr; white-space: nowrap;"
          tbody tr td:nth-child(8): "background-color: rgba(39, 179, 118,0.2); color: white;"
          tbody tr:hover: "background-color: rgba(180, 70, 70,0.2) !important; color:white !important;"
          th+: "border-bottom: 1px solid rgb(127,127,127);"
        card_mod:
          style:
            .: |
              ha-card {
                overflow: auto;
                box-shadow: none !important;
                font-size: 13px;
                }
        entities:
          include: sensor.scoreboard_afl
        sort_by: entries
        columns:
          - name: "#"
            data: entries
            modify: x.stats.find(y=>y.name == 'rank').displayValue
            align: center
          - name: Team
            data: entries
            modify: |-
              if (typeof x.team.logos !== 'undefined')
                '<div><img src="' + x.team.logos[0].href + '" style="height:20px;vertical-align:middle;">&nbsp;' + x.team.displayName + '</div>'
              else
                '<div><span style="display: inline-block;width: 20px;"></span>&nbsp;' + x.team.displayName + '</div>'
          - name: Pl
            data: entries
            modify: x.stats.find(y=>y.name == 'gamesPlayed').displayValue
            align: center
          - name: W
            data: entries
            modify: x.stats.find(y=>y.name == 'wins').displayValue
            align: center
          - name: D
            data: entries
            modify: x.stats.find(y=>y.name == 'ties').displayValue
            align: center
          - name: L
            data: entries
            modify: x.stats.find(y=>y.name == 'losses').displayValue
            align: center
          - name: "%"
            data: entries
            modify: x.stats.find(y=>y.name == 'percentage').value
            align: center
          - name: Pts
            data: entries
            modify: x.stats.find(y=>y.name == 'points').value
            align: center
  - type: custom:decluttering-card
    template: sports_card
    variables:
      - entity: sensor.upcoming_sport_sydney_swans
  - type: custom:decluttering-card
    template: sports_card
    variables:
      - entity: sensor.upcoming_sport_aflw_all_teams
  - type: custom:decluttering-card
    template: sports_card
    variables:
      - entity: sensor.upcoming_sport_sydney_swans_aflw
  - type: custom:decluttering-card
    template: sports_card
    variables:
      - entity: sensor.upcoming_sport_sydney_swans_vfl
